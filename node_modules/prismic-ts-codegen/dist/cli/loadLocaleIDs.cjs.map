{"version":3,"file":"loadLocaleIDs.cjs","sources":["../../../src/cli/loadLocaleIDs.ts"],"sourcesContent":["import * as prismic from \"@prismicio/client\";\nimport fetch from \"node-fetch\";\n\ntype LoadLocalesConfig =\n\t| {\n\t\t\tlocaleIDs?: string[];\n\t  }\n\t| {\n\t\t\tlocaleIDs?: string[];\n\t\t\trepositoryName: string;\n\t\t\taccessToken: string;\n\t\t\tfetchFromRepository?: boolean;\n\t  };\n\nexport const loadLocaleIDs = async (\n\tconfig: LoadLocalesConfig,\n): Promise<string[]> => {\n\tconst localeIDs = new Set<string>(config.localeIDs || []);\n\n\tif (\"repositoryName\" in config && config.fetchFromRepository) {\n\t\tconst client = prismic.createClient(config.repositoryName, {\n\t\t\taccessToken: config.accessToken,\n\t\t\tfetch,\n\t\t});\n\n\t\tconst repository = await client.getRepository();\n\n\t\tfor (const language of repository.languages) {\n\t\t\tlocaleIDs.add(language.id);\n\t\t}\n\t}\n\n\treturn [...localeIDs];\n};\n"],"names":["prismic.createClient","fetch"],"mappings":";;;;AAca,MAAA,gBAAgB,OAC5B,WACsB;AACtB,QAAM,YAAY,IAAI,IAAY,OAAO,aAAa,CAAE,CAAA;AAEpD,MAAA,oBAAoB,UAAU,OAAO,qBAAqB;AAC7D,UAAM,SAASA,aAAAA,aAAqB,OAAO,gBAAgB;AAAA,MAC1D,aAAa,OAAO;AAAA,MAAA,OACpBC,MAAA;AAAA,IAAA,CACA;AAEK,UAAA,aAAa,MAAM,OAAO;AAErB,eAAA,YAAY,WAAW,WAAW;AAClC,gBAAA,IAAI,SAAS,EAAE;AAAA,IACzB;AAAA,EACD;AAEM,SAAA,CAAC,GAAG,SAAS;AACrB;;"}