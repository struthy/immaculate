{"version":3,"file":"buildQueryURL.cjs","sources":["../../../../../node_modules/@prismicio/client/dist/buildQueryURL.js"],"sourcesContent":["import { castArray } from \"./lib/castArray.js\";\nimport { devMsg } from \"./lib/devMsg.js\";\nconst RENAMED_PARAMS = {\n  accessToken: \"access_token\"\n};\nconst castOrderingToString = (ordering) => {\n  if (typeof ordering === \"string\") {\n    if (process.env.NODE_ENV === \"development\") {\n      const [field, direction] = ordering.split(\" \");\n      const objectForm = direction === \"desc\" ? `{ field: \"${field}\", direction: \"desc\" }` : `{ field: \"${field}\" }`;\n      console.warn(`[@prismicio/client] A string value was provided to the \\`orderings\\` query parameter. Strings are deprecated. Please convert it to the object form: ${objectForm}. For more details, see ${devMsg(\"orderings-must-be-an-array-of-objects\")}`);\n    }\n    return ordering;\n  }\n  return ordering.direction === \"desc\" ? `${ordering.field} desc` : ordering.field;\n};\nconst buildQueryURL = (endpoint, args) => {\n  const { filters, predicates, ...params } = args;\n  const url = new URL(`documents/search`, `${endpoint}/`);\n  if (filters) {\n    if (process.env.NODE_ENV === \"development\" && !Array.isArray(filters)) {\n      console.warn(`[@prismicio/client] A non-array value was provided to the \\`filters\\` query parameter (\\`${filters}\\`). Non-array values are deprecated. Please convert it to an array. For more details, see ${devMsg(\"filters-must-be-an-array\")}`);\n    }\n    for (const filter of castArray(filters)) {\n      url.searchParams.append(\"q\", `[${filter}]`);\n    }\n  }\n  if (predicates) {\n    for (const predicate of castArray(predicates)) {\n      url.searchParams.append(\"q\", `[${predicate}]`);\n    }\n  }\n  for (const k in params) {\n    const name = RENAMED_PARAMS[k] || k;\n    let value = params[k];\n    if (name === \"orderings\") {\n      const scopedValue = params[name];\n      if (scopedValue != null) {\n        if (process.env.NODE_ENV === \"development\" && typeof scopedValue === \"string\") {\n          console.warn(`[@prismicio/client] A string value was provided to the \\`orderings\\` query parameter. Strings are deprecated. Please convert it to an array of objects. For more details, see ${devMsg(\"orderings-must-be-an-array-of-objects\")}`);\n        }\n        const v = castArray(scopedValue).map((ordering) => castOrderingToString(ordering)).join(\",\");\n        value = `[${v}]`;\n      }\n    } else if (name === \"routes\") {\n      if (typeof params[name] === \"object\") {\n        value = JSON.stringify(castArray(params[name]));\n      }\n    }\n    if (value != null) {\n      url.searchParams.set(name, castArray(value).join(\",\"));\n    }\n  }\n  return url.toString();\n};\nexport {\n  buildQueryURL\n};\n//# sourceMappingURL=buildQueryURL.js.map\n"],"names":["devMsg","castArray"],"mappings":";;;;AAEA,MAAM,iBAAiB;AAAA,EACrB,aAAa;AACf;AACA,MAAM,uBAAuB,CAAC,aAAa;AACzC,MAAI,OAAO,aAAa,UAAU;AAChC,QAAI,QAAQ,IAAI,aAAa,eAAe;AAC1C,YAAM,CAAC,OAAO,SAAS,IAAI,SAAS,MAAM,GAAG;AAC7C,YAAM,aAAa,cAAc,SAAS,aAAa,gCAAgC,aAAa;AACpG,cAAQ,KAAK,uJAAuJ,qCAAqCA,cAAO,uCAAuC,GAAG;AAAA,IAC3P;AACD,WAAO;AAAA,EACR;AACD,SAAO,SAAS,cAAc,SAAS,GAAG,SAAS,eAAe,SAAS;AAC7E;AACK,MAAC,gBAAgB,CAAC,UAAU,SAAS;AACxC,QAAM,EAAE,SAAS,YAAY,GAAG,OAAM,IAAK;AAC3C,QAAM,MAAM,IAAI,IAAI,oBAAoB,GAAG,WAAW;AACtD,MAAI,SAAS;AACX,QAAI,QAAQ,IAAI,aAAa,iBAAiB,CAAC,MAAM,QAAQ,OAAO,GAAG;AACrE,cAAQ,KAAK,4FAA4F,qGAAqGA,cAAO,0BAA0B,GAAG;AAAA,IACnP;AACD,eAAW,UAAUC,oBAAU,OAAO,GAAG;AACvC,UAAI,aAAa,OAAO,KAAK,IAAI,SAAS;AAAA,IAC3C;AAAA,EACF;AACD,MAAI,YAAY;AACd,eAAW,aAAaA,oBAAU,UAAU,GAAG;AAC7C,UAAI,aAAa,OAAO,KAAK,IAAI,YAAY;AAAA,IAC9C;AAAA,EACF;AACD,aAAW,KAAK,QAAQ;AACtB,UAAM,OAAO,eAAe,CAAC,KAAK;AAClC,QAAI,QAAQ,OAAO,CAAC;AACpB,QAAI,SAAS,aAAa;AACxB,YAAM,cAAc,OAAO,IAAI;AAC/B,UAAI,eAAe,MAAM;AACvB,YAAI,QAAQ,IAAI,aAAa,iBAAiB,OAAO,gBAAgB,UAAU;AAC7E,kBAAQ,KAAK,iLAAiLD,OAAM,OAAC,uCAAuC,GAAG;AAAA,QAChP;AACD,cAAM,IAAIC,UAAAA,UAAU,WAAW,EAAE,IAAI,CAAC,aAAa,qBAAqB,QAAQ,CAAC,EAAE,KAAK,GAAG;AAC3F,gBAAQ,IAAI;AAAA,MACb;AAAA,IACP,WAAe,SAAS,UAAU;AAC5B,UAAI,OAAO,OAAO,IAAI,MAAM,UAAU;AACpC,gBAAQ,KAAK,UAAUA,UAAAA,UAAU,OAAO,IAAI,CAAC,CAAC;AAAA,MAC/C;AAAA,IACF;AACD,QAAI,SAAS,MAAM;AACjB,UAAI,aAAa,IAAI,MAAMA,UAAAA,UAAU,KAAK,EAAE,KAAK,GAAG,CAAC;AAAA,IACtD;AAAA,EACF;AACD,SAAO,IAAI;AACb;;","x_google_ignoreList":[0]}