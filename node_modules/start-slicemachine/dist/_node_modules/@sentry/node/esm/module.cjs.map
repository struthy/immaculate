{"version":3,"file":"module.cjs","sources":["../../../../../../../node_modules/@sentry/node/esm/module.js"],"sourcesContent":["import { posix, sep } from 'path';\nimport { dirname } from '@sentry/utils';\n\n/** normalizes Windows paths */\nfunction normalizeWindowsPath(path) {\n  return path\n    .replace(/^[A-Z]:/, '') // remove Windows-style prefix\n    .replace(/\\\\/g, '/'); // replace all `\\` instances with `/`\n}\n\n/** Creates a function that gets the module name from a filename */\nfunction createGetModuleFromFilename(\n  basePath = process.argv[1] ? dirname(process.argv[1]) : process.cwd(),\n  isWindows = sep === '\\\\',\n) {\n  const normalizedBase = isWindows ? normalizeWindowsPath(basePath) : basePath;\n\n  return (filename) => {\n    if (!filename) {\n      return;\n    }\n\n    const normalizedFilename = isWindows ? normalizeWindowsPath(filename) : filename;\n\n    // eslint-disable-next-line prefer-const\n    let { dir, base: file, ext } = posix.parse(normalizedFilename);\n\n    if (ext === '.js' || ext === '.mjs' || ext === '.cjs') {\n      file = file.slice(0, ext.length * -1);\n    }\n\n    if (!dir) {\n      // No dirname whatsoever\n      dir = '.';\n    }\n\n    const n = dir.lastIndexOf('/node_modules');\n    if (n > -1) {\n      return `${dir.slice(n + 14).replace(/\\//g, '.')}:${file}`;\n    }\n\n    // Let's see if it's a part of the main module\n    // To be a part of main module, it has to share the same base\n    if (dir.startsWith(normalizedBase)) {\n      let moduleName = dir.slice(normalizedBase.length + 1).replace(/\\//g, '.');\n\n      if (moduleName) {\n        moduleName += ':';\n      }\n      moduleName += file;\n\n      return moduleName;\n    }\n\n    return file;\n  };\n}\n\nexport { createGetModuleFromFilename };\n//# sourceMappingURL=module.js.map\n"],"names":["path","dirname","sep","posix"],"mappings":";;;;AAIA,SAAS,qBAAqBA,OAAM;AAClC,SAAOA,MACJ,QAAQ,WAAW,EAAE,EACrB,QAAQ,OAAO,GAAG;AACvB;AAGA,SAAS,4BACP,WAAW,QAAQ,KAAK,CAAC,IAAIC,OAAO,QAAC,QAAQ,KAAK,CAAC,CAAC,IAAI,QAAQ,IAAK,GACrE,YAAYC,KAAG,QAAK,MACpB;AACA,QAAM,iBAAiB,YAAY,qBAAqB,QAAQ,IAAI;AAEpE,SAAO,CAAC,aAAa;AACnB,QAAI,CAAC,UAAU;AACb;AAAA,IACD;AAED,UAAM,qBAAqB,YAAY,qBAAqB,QAAQ,IAAI;AAGxE,QAAI,EAAE,KAAK,MAAM,MAAM,IAAG,IAAKC,KAAK,MAAC,MAAM,kBAAkB;AAE7D,QAAI,QAAQ,SAAS,QAAQ,UAAU,QAAQ,QAAQ;AACrD,aAAO,KAAK,MAAM,GAAG,IAAI,SAAS,EAAE;AAAA,IACrC;AAED,QAAI,CAAC,KAAK;AAER,YAAM;AAAA,IACP;AAED,UAAM,IAAI,IAAI,YAAY,eAAe;AACzC,QAAI,IAAI,IAAI;AACV,aAAO,GAAG,IAAI,MAAM,IAAI,EAAE,EAAE,QAAQ,OAAO,GAAG,KAAK;AAAA,IACpD;AAID,QAAI,IAAI,WAAW,cAAc,GAAG;AAClC,UAAI,aAAa,IAAI,MAAM,eAAe,SAAS,CAAC,EAAE,QAAQ,OAAO,GAAG;AAExE,UAAI,YAAY;AACd,sBAAc;AAAA,MACf;AACD,oBAAc;AAEd,aAAO;AAAA,IACR;AAED,WAAO;AAAA,EACX;AACA;;","x_google_ignoreList":[0]}