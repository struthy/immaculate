{"version":3,"file":"node-stack-trace.js","sources":["../../../../../../../../../../node_modules/@sentry/node/node_modules/@sentry/utils/esm/node-stack-trace.js"],"sourcesContent":["/**\n * Does this filename look like it's part of the app code?\n */\nfunction filenameIsInApp(filename, isNative = false) {\n  const isInternal =\n    isNative ||\n    (filename &&\n      // It's not internal if it's an absolute linux path\n      !filename.startsWith('/') &&\n      // It's not internal if it's an absolute windows path\n      !filename.match(/^[A-Z]:/) &&\n      // It's not internal if the path is starting with a dot\n      !filename.startsWith('.') &&\n      // It's not internal if the frame has a protocol. In node, this is usually the case if the file got pre-processed with a bundler like webpack\n      !filename.match(/^[a-zA-Z]([a-zA-Z0-9.\\-+])*:\\/\\//)); // Schema from: https://stackoverflow.com/a/3641782\n\n  // in_app is all that's not an internal Node function or a module within node_modules\n  // note that isNative appears to return true even for node core libraries\n  // see https://github.com/getsentry/raven-node/issues/176\n\n  return !isInternal && filename !== undefined && !filename.includes('node_modules/');\n}\n\n/** Node Stack line parser */\n// eslint-disable-next-line complexity\nfunction node(getModule) {\n  const FILENAME_MATCH = /^\\s*[-]{4,}$/;\n  const FULL_MATCH = /at (?:async )?(?:(.+?)\\s+\\()?(?:(.+):(\\d+):(\\d+)?|([^)]+))\\)?/;\n\n  // eslint-disable-next-line complexity\n  return (line) => {\n    const lineMatch = line.match(FULL_MATCH);\n\n    if (lineMatch) {\n      let object;\n      let method;\n      let functionName;\n      let typeName;\n      let methodName;\n\n      if (lineMatch[1]) {\n        functionName = lineMatch[1];\n\n        let methodStart = functionName.lastIndexOf('.');\n        if (functionName[methodStart - 1] === '.') {\n          methodStart--;\n        }\n\n        if (methodStart > 0) {\n          object = functionName.slice(0, methodStart);\n          method = functionName.slice(methodStart + 1);\n          const objectEnd = object.indexOf('.Module');\n          if (objectEnd > 0) {\n            functionName = functionName.slice(objectEnd + 1);\n            object = object.slice(0, objectEnd);\n          }\n        }\n        typeName = undefined;\n      }\n\n      if (method) {\n        typeName = object;\n        methodName = method;\n      }\n\n      if (method === '<anonymous>') {\n        methodName = undefined;\n        functionName = undefined;\n      }\n\n      if (functionName === undefined) {\n        methodName = methodName || '<anonymous>';\n        functionName = typeName ? `${typeName}.${methodName}` : methodName;\n      }\n\n      let filename = lineMatch[2] && lineMatch[2].startsWith('file://') ? lineMatch[2].slice(7) : lineMatch[2];\n      const isNative = lineMatch[5] === 'native';\n\n      // If it's a Windows path, trim the leading slash so that `/C:/foo` becomes `C:/foo`\n      if (filename && filename.match(/\\/[A-Z]:/)) {\n        filename = filename.slice(1);\n      }\n\n      if (!filename && lineMatch[5] && !isNative) {\n        filename = lineMatch[5];\n      }\n\n      return {\n        filename,\n        module: getModule ? getModule(filename) : undefined,\n        function: functionName,\n        lineno: parseInt(lineMatch[3], 10) || undefined,\n        colno: parseInt(lineMatch[4], 10) || undefined,\n        in_app: filenameIsInApp(filename, isNative),\n      };\n    }\n\n    if (line.match(FILENAME_MATCH)) {\n      return {\n        filename: line,\n      };\n    }\n\n    return undefined;\n  };\n}\n\nexport { filenameIsInApp, node };\n//# sourceMappingURL=node-stack-trace.js.map\n"],"names":[],"mappings":"AAGA,SAAS,gBAAgB,UAAU,WAAW,OAAO;AACnD,QAAM,aACJ,YACC;AAAA,EAEC,CAAC,SAAS,WAAW,GAAG;AAAA,EAExB,CAAC,SAAS,MAAM,SAAS;AAAA,EAEzB,CAAC,SAAS,WAAW,GAAG;AAAA,EAExB,CAAC,SAAS,MAAM,kCAAkC;AAMtD,SAAO,CAAC,cAAc,aAAa,UAAa,CAAC,SAAS,SAAS,eAAe;AACpF;AAIA,SAAS,KAAK,WAAW;AACvB,QAAM,iBAAiB;AACvB,QAAM,aAAa;AAGnB,SAAO,CAAC,SAAS;AACf,UAAM,YAAY,KAAK,MAAM,UAAU;AAEvC,QAAI,WAAW;AACb,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI;AACJ,UAAI;AAEJ,UAAI,UAAU,CAAC,GAAG;AAChB,uBAAe,UAAU,CAAC;AAE1B,YAAI,cAAc,aAAa,YAAY,GAAG;AAC9C,YAAI,aAAa,cAAc,CAAC,MAAM,KAAK;AACzC;AAAA,QACD;AAED,YAAI,cAAc,GAAG;AACnB,mBAAS,aAAa,MAAM,GAAG,WAAW;AAC1C,mBAAS,aAAa,MAAM,cAAc,CAAC;AAC3C,gBAAM,YAAY,OAAO,QAAQ,SAAS;AAC1C,cAAI,YAAY,GAAG;AACjB,2BAAe,aAAa,MAAM,YAAY,CAAC;AAC/C,qBAAS,OAAO,MAAM,GAAG,SAAS;AAAA,UACnC;AAAA,QACF;AACD,mBAAW;AAAA,MACZ;AAED,UAAI,QAAQ;AACV,mBAAW;AACX,qBAAa;AAAA,MACd;AAED,UAAI,WAAW,eAAe;AAC5B,qBAAa;AACb,uBAAe;AAAA,MAChB;AAED,UAAI,iBAAiB,QAAW;AAC9B,qBAAa,cAAc;AAC3B,uBAAe,WAAW,GAAG,YAAY,eAAe;AAAA,MACzD;AAED,UAAI,WAAW,UAAU,CAAC,KAAK,UAAU,CAAC,EAAE,WAAW,SAAS,IAAI,UAAU,CAAC,EAAE,MAAM,CAAC,IAAI,UAAU,CAAC;AACvG,YAAM,WAAW,UAAU,CAAC,MAAM;AAGlC,UAAI,YAAY,SAAS,MAAM,UAAU,GAAG;AAC1C,mBAAW,SAAS,MAAM,CAAC;AAAA,MAC5B;AAED,UAAI,CAAC,YAAY,UAAU,CAAC,KAAK,CAAC,UAAU;AAC1C,mBAAW,UAAU,CAAC;AAAA,MACvB;AAED,aAAO;AAAA,QACL;AAAA,QACA,QAAQ,YAAY,UAAU,QAAQ,IAAI;AAAA,QAC1C,UAAU;AAAA,QACV,QAAQ,SAAS,UAAU,CAAC,GAAG,EAAE,KAAK;AAAA,QACtC,OAAO,SAAS,UAAU,CAAC,GAAG,EAAE,KAAK;AAAA,QACrC,QAAQ,gBAAgB,UAAU,QAAQ;AAAA,MAClD;AAAA,IACK;AAED,QAAI,KAAK,MAAM,cAAc,GAAG;AAC9B,aAAO;AAAA,QACL,UAAU;AAAA,MAClB;AAAA,IACK;AAED,WAAO;AAAA,EACX;AACA;","x_google_ignoreList":[0]}