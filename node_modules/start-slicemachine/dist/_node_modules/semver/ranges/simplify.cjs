"use strict";
Object.defineProperty(exports, Symbol.toStringTag, { value: "Module" });
const satisfies$1 = require("../functions/satisfies.cjs");
const compare$1 = require("../functions/compare.cjs");
const satisfies = satisfies$1.satisfies_1;
const compare = compare$1.compare_1;
var simplify = (versions, range, options) => {
  const set = [];
  let first = null;
  let prev = null;
  const v = versions.sort((a, b) => compare(a, b, options));
  for (const version of v) {
    const included = satisfies(version, range, options);
    if (included) {
      prev = version;
      if (!first) {
        first = version;
      }
    } else {
      if (prev) {
        set.push([first, prev]);
      }
      prev = null;
      first = null;
    }
  }
  if (first) {
    set.push([first, null]);
  }
  const ranges = [];
  for (const [min, max] of set) {
    if (min === max) {
      ranges.push(min);
    } else if (!max && min === v[0]) {
      ranges.push("*");
    } else if (!max) {
      ranges.push(`>=${min}`);
    } else if (min === v[0]) {
      ranges.push(`<=${max}`);
    } else {
      ranges.push(`${min} - ${max}`);
    }
  }
  const simplified = ranges.join(" || ");
  const original = typeof range.raw === "string" ? range.raw : String(range);
  return simplified.length < original.length ? simplified : range;
};
exports.simplify = simplify;
//# sourceMappingURL=simplify.cjs.map
