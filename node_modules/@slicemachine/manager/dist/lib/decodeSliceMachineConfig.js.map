{"version":3,"file":"decodeSliceMachineConfig.js","sources":["../../../src/lib/decodeSliceMachineConfig.ts"],"sourcesContent":["import * as t from \"io-ts\";\n\nimport { SliceMachineConfig } from \"../types\";\n\nimport { decode, DecodeReturnType } from \"./decode\";\n\nconst SliceMachineConfigPluginRegistrationCodec = t.union([\n\tt.string,\n\tt.intersection([\n\t\tt.type({\n\t\t\tresolve: t.string,\n\t\t}),\n\t\tt.partial({\n\t\t\toptions: t.UnknownRecord,\n\t\t}),\n\t]),\n]);\n\nconst SliceMachineConfigCodec = t.intersection([\n\tt.type({\n\t\trepositoryName: t.string,\n\t\tadapter: SliceMachineConfigPluginRegistrationCodec,\n\t}),\n\tt.partial({\n\t\tapiEndpoint: t.string,\n\t\tlibraries: t.array(t.string),\n\t\tlocalSliceSimulatorURL: t.string,\n\t\tplugins: t.array(SliceMachineConfigPluginRegistrationCodec),\n\t\tlabs: t.partial({ legacySliceUpgrader: t.boolean }),\n\t}),\n]);\n\n// TODO: Maybe rename \"decode\" to \"validate\". \"decode\" exposes the `io-ts`\n// internals.\nexport const decodeSliceMachineConfig = (\n\tinput: unknown,\n): DecodeReturnType<SliceMachineConfig, SliceMachineConfig, unknown> => {\n\treturn decode(SliceMachineConfigCodec, input);\n};\n"],"names":[],"mappings":";;AAMA,MAAM,4CAA4C,EAAE,MAAM;AAAA,EACzD,EAAE;AAAA,EACF,EAAE,aAAa;AAAA,IACd,EAAE,KAAK;AAAA,MACN,SAAS,EAAE;AAAA,IAAA,CACX;AAAA,IACD,EAAE,QAAQ;AAAA,MACT,SAAS,EAAE;AAAA,IAAA,CACX;AAAA,EAAA,CACD;AACD,CAAA;AAED,MAAM,0BAA0B,EAAE,aAAa;AAAA,EAC9C,EAAE,KAAK;AAAA,IACN,gBAAgB,EAAE;AAAA,IAClB,SAAS;AAAA,EAAA,CACT;AAAA,EACD,EAAE,QAAQ;AAAA,IACT,aAAa,EAAE;AAAA,IACf,WAAW,EAAE,MAAM,EAAE,MAAM;AAAA,IAC3B,wBAAwB,EAAE;AAAA,IAC1B,SAAS,EAAE,MAAM,yCAAyC;AAAA,IAC1D,MAAM,EAAE,QAAQ,EAAE,qBAAqB,EAAE,SAAS;AAAA,EAAA,CAClD;AACD,CAAA;AAIY,MAAA,2BAA2B,CACvC,UACsE;AAC/D,SAAA,OAAO,yBAAyB,KAAK;AAC7C;"}