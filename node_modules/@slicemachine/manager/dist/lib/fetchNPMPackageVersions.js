import * as t from "io-ts";
import fetch from "./fetch.js";
import { decode } from "./decode.js";
const NPM_REGISTRY_ABBREVIATED_METADATA_ACCEPT_HEADER = "application/vnd.npm.install-v1+json; q=1.0, application/json; q=0.8, */*";
const NPMRegistryPackageMetadataCodec = t.type({
  versions: t.UnknownRecord
});
const fetchNPMPackageVersions = async (args) => {
  const res = await fetch(`https://registry.npmjs.org/${args.packageName}`, {
    headers: {
      Accept: NPM_REGISTRY_ABBREVIATED_METADATA_ACCEPT_HEADER
    }
  });
  const json = await res.json();
  const { value, error } = decode(NPMRegistryPackageMetadataCodec, json);
  if (error) {
    throw new Error(`Invalid NPM registry response.`, { cause: error });
  }
  return Object.keys(value.versions);
};
export {
  fetchNPMPackageVersions
};
//# sourceMappingURL=fetchNPMPackageVersions.js.map
