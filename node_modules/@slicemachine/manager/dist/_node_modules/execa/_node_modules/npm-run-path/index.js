import process from "node:process";
import path__default from "node:path";
import url from "node:url";
import pathKey from "../path-key/index.js";
function npmRunPath(options = {}) {
  const {
    cwd = process.cwd(),
    path: path_ = process.env[pathKey()],
    execPath = process.execPath
  } = options;
  let previous;
  const cwdString = cwd instanceof URL ? url.fileURLToPath(cwd) : cwd;
  let cwdPath = path__default.resolve(cwdString);
  const result = [];
  while (previous !== cwdPath) {
    result.push(path__default.join(cwdPath, "node_modules/.bin"));
    previous = cwdPath;
    cwdPath = path__default.resolve(cwdPath, "..");
  }
  result.push(path__default.resolve(cwdString, execPath, ".."));
  return [...result, path_].join(path__default.delimiter);
}
function npmRunPathEnv({ env = process.env, ...options } = {}) {
  env = { ...env };
  const path = pathKey({ env });
  options.path = env[path];
  env[path] = npmRunPath(options);
  return env;
}
export {
  npmRunPath,
  npmRunPathEnv
};
//# sourceMappingURL=index.js.map
