{"version":3,"file":"context.js","sources":["../../../../../../../../../node_modules/@amplitude/analytics-node/lib/esm/plugins/context.js"],"sourcesContent":["import { __assign } from \"tslib\";\nimport { PluginType } from '@amplitude/analytics-types';\nimport { UUID } from '@amplitude/analytics-core';\nimport { VERSION } from '../version';\nvar Context = /** @class */ (function () {\n    function Context() {\n        this.name = 'context';\n        this.type = PluginType.BEFORE;\n        this.eventId = 0;\n        this.library = \"amplitude-node-ts/\".concat(VERSION);\n    }\n    Context.prototype.setup = function (config) {\n        this.config = config;\n        return Promise.resolve(undefined);\n    };\n    Context.prototype.execute = function (context) {\n        var _this = this;\n        return new Promise(function (resolve) {\n            var time = new Date().getTime();\n            var contextEvent = __assign(__assign(__assign({ time: time, insert_id: UUID(), plan: _this.config.plan }, (_this.config.ingestionMetadata && {\n                ingestion_metadata: {\n                    source_name: _this.config.ingestionMetadata.sourceName,\n                    source_version: _this.config.ingestionMetadata.sourceVersion,\n                },\n            })), context), { event_id: _this.eventId++, library: _this.library });\n            return resolve(contextEvent);\n        });\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=context.js.map"],"names":["Context"],"mappings":";;;;AAIG,IAAC;AAAA;AAAA,EAAyB,WAAY;AACrC,aAASA,WAAU;AACf,WAAK,OAAO;AACZ,WAAK,OAAO,WAAW;AACvB,WAAK,UAAU;AACf,WAAK,UAAU,qBAAqB,OAAO,OAAO;AAAA,IACrD;AACD,IAAAA,SAAQ,UAAU,QAAQ,SAAU,QAAQ;AACxC,WAAK,SAAS;AACd,aAAO,QAAQ,QAAQ,MAAS;AAAA,IACxC;AACI,IAAAA,SAAQ,UAAU,UAAU,SAAU,SAAS;AAC3C,UAAI,QAAQ;AACZ,aAAO,IAAI,QAAQ,SAAU,SAAS;AAClC,YAAI,QAAO,oBAAI,KAAM,GAAC,QAAO;AAC7B,YAAI,eAAe,SAAS,SAAS,SAAS,EAAE,MAAY,WAAW,KAAI,GAAI,MAAM,MAAM,OAAO,KAAI,GAAK,MAAM,OAAO,qBAAqB;AAAA,UACzI,oBAAoB;AAAA,YAChB,aAAa,MAAM,OAAO,kBAAkB;AAAA,YAC5C,gBAAgB,MAAM,OAAO,kBAAkB;AAAA,UAClD;AAAA,QACJ,CAAA,GAAI,OAAO,GAAG,EAAE,UAAU,MAAM,WAAW,SAAS,MAAM,QAAO,CAAE;AACpE,eAAO,QAAQ,YAAY;AAAA,MACvC,CAAS;AAAA,IACT;AACI,WAAOA;AAAA,EACX,EAAG;AAAA;","x_google_ignoreList":[0]}