{"version":3,"file":"variant.js","sources":["../../../../../../../../../node_modules/@amplitude/experiment-node-server/dist/src/util/variant.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.evaluationVariantsToVariants = exports.evaluationVariantToVariant = exports.filterDefaultVariants = void 0;\nconst filterDefaultVariants = (variants) => {\n    var _a, _b;\n    const results = {};\n    for (const flagKey in variants) {\n        const variant = variants[flagKey];\n        const isDefault = (_a = variant === null || variant === void 0 ? void 0 : variant.metadata) === null || _a === void 0 ? void 0 : _a.default;\n        const isDeployed = ((_b = variant === null || variant === void 0 ? void 0 : variant.metadata) === null || _b === void 0 ? void 0 : _b.deployed) || true;\n        if (!isDefault && isDeployed) {\n            results[flagKey] = variant;\n        }\n    }\n    return results;\n};\nexports.filterDefaultVariants = filterDefaultVariants;\nconst evaluationVariantToVariant = (evaluationVariant) => {\n    let stringValue;\n    if (typeof evaluationVariant.value === 'string') {\n        stringValue = evaluationVariant.value;\n    }\n    else if (evaluationVariant.value !== null &&\n        evaluationVariant.value !== undefined) {\n        stringValue = JSON.stringify(evaluationVariant.value);\n    }\n    return Object.assign(Object.assign({}, evaluationVariant), { value: stringValue });\n};\nexports.evaluationVariantToVariant = evaluationVariantToVariant;\nconst evaluationVariantsToVariants = (evaluationVariants) => {\n    const variants = {};\n    Object.keys(evaluationVariants).forEach((key) => {\n        variants[key] = (0, exports.evaluationVariantToVariant)(evaluationVariants[key]);\n    });\n    return variants;\n};\nexports.evaluationVariantsToVariants = evaluationVariantsToVariants;\n"],"names":["variant"],"mappings":";;AACA,SAAO,eAAc,SAAU,cAAc,EAAE,OAAO,KAAI,CAAE;AAC5D,UAAA,+BAAuC,QAAqC,6BAAA,QAAA,wBAAgC;AAC5G,QAAM,wBAAwB,CAAC,aAAa;AACxC,QAAI,IAAI;AACR,UAAM,UAAU,CAAA;AAChB,eAAW,WAAW,UAAU;AAC5B,YAAMA,WAAU,SAAS,OAAO;AAChC,YAAM,aAAa,KAAKA,aAAY,QAAQA,aAAY,SAAS,SAASA,SAAQ,cAAc,QAAQ,OAAO,SAAS,SAAS,GAAG;AACpI,YAAM,eAAe,KAAKA,aAAY,QAAQA,aAAY,SAAS,SAASA,SAAQ,cAAc,QAAQ,OAAO,SAAS,SAAS,GAAG,aAAa;AACnJ,UAAI,CAAC,aAAa,YAAY;AAC1B,gBAAQ,OAAO,IAAIA;AAAA,MACtB;AAAA,IACJ;AACD,WAAO;AAAA,EACX;AACA,UAAA,wBAAgC;AAChC,QAAM,6BAA6B,CAAC,sBAAsB;AACtD,QAAI;AACJ,QAAI,OAAO,kBAAkB,UAAU,UAAU;AAC7C,oBAAc,kBAAkB;AAAA,IACnC,WACQ,kBAAkB,UAAU,QACjC,kBAAkB,UAAU,QAAW;AACvC,oBAAc,KAAK,UAAU,kBAAkB,KAAK;AAAA,IACvD;AACD,WAAO,OAAO,OAAO,OAAO,OAAO,CAAA,GAAI,iBAAiB,GAAG,EAAE,OAAO,YAAW,CAAE;AAAA,EACrF;AACA,UAAA,6BAAqC;AACrC,QAAM,+BAA+B,CAAC,uBAAuB;AACzD,UAAM,WAAW,CAAA;AACjB,WAAO,KAAK,kBAAkB,EAAE,QAAQ,CAAC,QAAQ;AAC7C,eAAS,GAAG,KAAQ,GAAA,QAAQ,4BAA4B,mBAAmB,GAAG,CAAC;AAAA,IACvF,CAAK;AACD,WAAO;AAAA,EACX;AACA,UAAA,+BAAuC;;","x_google_ignoreList":[0]}