"use strict";
const assignmentFilter = require("../../../../../../_virtual/assignment-filter.cjs");
require("../util/cache.cjs");
require("./assignment-service.cjs");
const cache = require("../../../../../../_virtual/cache2.cjs");
const assignmentService = require("../../../../../../_virtual/assignment-service.cjs");
Object.defineProperty(assignmentFilter.__exports, "__esModule", { value: true });
assignmentFilter.__exports.InMemoryAssignmentFilter = void 0;
const cache_1 = cache.__exports;
const assignment_service_1 = assignmentService.__exports;
class InMemoryAssignmentFilter {
  constructor(size, ttlMillis = assignment_service_1.DAY_MILLIS) {
    this.cache = new cache_1.Cache(size, ttlMillis);
  }
  shouldTrack(assignment) {
    if (Object.keys(assignment.results).length === 0) {
      return false;
    }
    const canonicalAssignment = assignment.canonicalize();
    const track = this.cache.get(canonicalAssignment) == void 0;
    if (track) {
      this.cache.put(canonicalAssignment, 0);
    }
    return track;
  }
}
assignmentFilter.__exports.InMemoryAssignmentFilter = InMemoryAssignmentFilter;
module.exports = assignmentFilter.__exports;
//# sourceMappingURL=assignment-filter.cjs.map
