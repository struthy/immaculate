{"version":3,"file":"base.cjs","sources":["../../../../../../../../../node_modules/@amplitude/analytics-core/lib/esm/transports/base.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-argument */\n/* eslint-disable @typescript-eslint/no-unsafe-assignment */\n/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport { Status } from '@amplitude/analytics-types';\nvar BaseTransport = /** @class */ (function () {\n    function BaseTransport() {\n    }\n    BaseTransport.prototype.send = function (_serverUrl, _payload) {\n        return Promise.resolve(null);\n    };\n    BaseTransport.prototype.buildResponse = function (responseJSON) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n        if (typeof responseJSON !== 'object') {\n            return null;\n        }\n        var statusCode = responseJSON.code || 0;\n        var status = this.buildStatus(statusCode);\n        switch (status) {\n            case Status.Success:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        eventsIngested: (_a = responseJSON.events_ingested) !== null && _a !== void 0 ? _a : 0,\n                        payloadSizeBytes: (_b = responseJSON.payload_size_bytes) !== null && _b !== void 0 ? _b : 0,\n                        serverUploadTime: (_c = responseJSON.server_upload_time) !== null && _c !== void 0 ? _c : 0,\n                    },\n                };\n            case Status.Invalid:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_d = responseJSON.error) !== null && _d !== void 0 ? _d : '',\n                        missingField: (_e = responseJSON.missing_field) !== null && _e !== void 0 ? _e : '',\n                        eventsWithInvalidFields: (_f = responseJSON.events_with_invalid_fields) !== null && _f !== void 0 ? _f : {},\n                        eventsWithMissingFields: (_g = responseJSON.events_with_missing_fields) !== null && _g !== void 0 ? _g : {},\n                        eventsWithInvalidIdLengths: (_h = responseJSON.events_with_invalid_id_lengths) !== null && _h !== void 0 ? _h : {},\n                        epsThreshold: (_j = responseJSON.eps_threshold) !== null && _j !== void 0 ? _j : 0,\n                        exceededDailyQuotaDevices: (_k = responseJSON.exceeded_daily_quota_devices) !== null && _k !== void 0 ? _k : {},\n                        silencedDevices: (_l = responseJSON.silenced_devices) !== null && _l !== void 0 ? _l : [],\n                        silencedEvents: (_m = responseJSON.silenced_events) !== null && _m !== void 0 ? _m : [],\n                        throttledDevices: (_o = responseJSON.throttled_devices) !== null && _o !== void 0 ? _o : {},\n                        throttledEvents: (_p = responseJSON.throttled_events) !== null && _p !== void 0 ? _p : [],\n                    },\n                };\n            case Status.PayloadTooLarge:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_q = responseJSON.error) !== null && _q !== void 0 ? _q : '',\n                    },\n                };\n            case Status.RateLimit:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                    body: {\n                        error: (_r = responseJSON.error) !== null && _r !== void 0 ? _r : '',\n                        epsThreshold: (_s = responseJSON.eps_threshold) !== null && _s !== void 0 ? _s : 0,\n                        throttledDevices: (_t = responseJSON.throttled_devices) !== null && _t !== void 0 ? _t : {},\n                        throttledUsers: (_u = responseJSON.throttled_users) !== null && _u !== void 0 ? _u : {},\n                        exceededDailyQuotaDevices: (_v = responseJSON.exceeded_daily_quota_devices) !== null && _v !== void 0 ? _v : {},\n                        exceededDailyQuotaUsers: (_w = responseJSON.exceeded_daily_quota_users) !== null && _w !== void 0 ? _w : {},\n                        throttledEvents: (_x = responseJSON.throttled_events) !== null && _x !== void 0 ? _x : [],\n                    },\n                };\n            case Status.Timeout:\n            default:\n                return {\n                    status: status,\n                    statusCode: statusCode,\n                };\n        }\n    };\n    BaseTransport.prototype.buildStatus = function (code) {\n        if (code >= 200 && code < 300) {\n            return Status.Success;\n        }\n        if (code === 429) {\n            return Status.RateLimit;\n        }\n        if (code === 413) {\n            return Status.PayloadTooLarge;\n        }\n        if (code === 408) {\n            return Status.Timeout;\n        }\n        if (code >= 400 && code < 500) {\n            return Status.Invalid;\n        }\n        if (code >= 500) {\n            return Status.Failed;\n        }\n        return Status.Unknown;\n    };\n    return BaseTransport;\n}());\nexport { BaseTransport };\n//# sourceMappingURL=base.js.map"],"names":["BaseTransport","status","Status"],"mappings":"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","x_google_ignoreList":[0]}