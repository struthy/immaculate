"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ImageDef = void 0;
const tslib_1 = require("tslib");
const customtypes_1 = require("@prismicio/types-internal/lib/customtypes");
const fp_ts_1 = require("fp-ts");
const function_1 = require("fp-ts/lib/function");
const t = tslib_1.__importStar(require("io-ts"));
const utils_1 = require("../../utils");
const codec = t.strict({
    image: t.string,
    config: t.strict({
        thumbnails: t.array(t.string),
    }),
});
exports.ImageDef = new t.Type("ImageDef", (u) => (0, utils_1.isFieldDef)(u) && customtypes_1.Image.is(u.def), (u) => {
    return (0, function_1.pipe)(codec.decode(u), fp_ts_1.either.map(({ image, config }) => ({
        key: image,
        def: {
            type: "Image",
            config: {
                thumbnails: config.thumbnails.map((t) => ({ name: t })),
            },
        },
    })));
}, (n) => n);
