"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CustomTypeDef = void 0;
const tslib_1 = require("tslib");
const fp_ts_1 = require("fp-ts");
const function_1 = require("fp-ts/lib/function");
const t = tslib_1.__importStar(require("io-ts"));
const WidgetDef_1 = require("./fields/WidgetDef");
const codec = t.strict({
    id: t.string,
    definitions: t.array(WidgetDef_1.WidgetDef),
});
exports.CustomTypeDef = new t.Type("CustomTypeDef", (u) => typeof u === "object" && u !== null && "customTypeId" in u, (u) => {
    return (0, function_1.pipe)(codec.decode(u), fp_ts_1.either.map(({ id, definitions }) => {
        return {
            customTypeId: id,
            fields: definitions.reduce((acc, { key, def }) => {
                return { ...acc, [key]: def };
            }, {}),
        };
    }));
}, (c) => c);
