import {
	FileLinkContent,
	FileLinkType,
} from "@prismicio/types-internal/lib/content"
import type { Link } from "@prismicio/types-internal/lib/customtypes"

import type { MockConfig } from "../../../MockConfig"

export type MediaLinkConfig = MockConfig<Link["type"], FileLinkContent>

function random(): FileLinkContent {
	return {
		__TYPE__: FileLinkType,
		id: "mock_Media_link",
		kind: "image/jpeg",
		name: "mock_name",
		url: "https://source.unsplash.com/daily",
		size: "0",
	}
}

export const MediaLinkMock = {
	generate(_def: Link, config?: MediaLinkConfig): FileLinkContent {
		const value: FileLinkContent = config?.value || random()
		return FileLinkContent.encode(value)
	},
}
