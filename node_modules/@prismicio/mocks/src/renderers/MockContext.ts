import {
	type ApiDocument,
	type LinkResolver,
	type RenderContext,
	Extensions,
} from "@prismicio/api-renderer/lib/models"

const ctx: RenderContext = {
	urlRewriter: {
		optimizeImageUrl(originUrl: string) {
			return originUrl
		},
		rewriteImageUrl(view) {
			return view.url || "/mockURL"
		},
		rewriteFileUrl(originUrl: string) {
			return originUrl
		},
		rewriteS3Bucket(url: string) {
			return url
		},
		enforceCDN(url: string) {
			return url
		},
	},
	emptyStringInsteadOfNull: false,
	Extension: {
		DocEncoder: {
			encodeDocId: Extensions.encodeDocId,
		},
		encoders: Extensions.IDEncoders,
	},
	LinkResolver: {
		buildUrl(_params: {
			linkResolver: LinkResolver | undefined
			pageType: string
			doc?: ApiDocument
		}): string | undefined | null {
			return "/"
		},
	},
}

export default ctx
