(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[33],{30755:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/slices/[lib]/[sliceName]/[variation]/simulator",function(){return i(40496)}])},57054:function(e,n,i){"use strict";i.d(n,{Z:function(){return c}});var t=i(5632),r=i(56580),o=i(15933),s=function(e,n,i){var t,r=null===(t=(0,o.Sd)(e))||void 0===t?void 0:t.find(function(e){return e.name.replace(/\//g,"--")===n});return null==r?void 0:r.components.find(function(e){return e.model.name===i})},c=function(){var e=(0,t.useRouter)(),n=(0,r.v9)(function(n){return{slice:s(n,e.query.lib,e.query.sliceName)}}).slice;if(!n)return{};var i=n.model.variations.find(function(n){return n.id===e.query.variation});return i?{slice:n,variation:i}:{}}},61107:function(e,n,i){"use strict";i.d(n,{z:function(){return d}});var t=i(62230),r=i(85244),o=i(98240),s=i(52322),c=i(2784),a=i(75289),l=function(e,n){return e?"".concat(e,"-").concat(n):""},u=function(e){switch(e){case"white":case"secondaryMedium":case"secondarySmall":case"secondary":return"#1A1523";default:return"grey01"}},d=(0,c.forwardRef)(function(e,n){var i=e.label,c=e.Icon,d=e.type,x=e.form,f=e.isLoading,h=void 0!==f&&f,p=e.disabled,v=e.onClick,g=e.sx,m=e.iconSize,b=void 0===m?16:m,j=e.iconFill,C=e.variant,S=void 0===C?"primary":C,k=(0,o.Z)(e,["label","Icon","type","form","isLoading","disabled","onClick","sx","iconSize","iconFill","variant"]);return(0,s.jsx)(a.zx,(0,r.Z)((0,t.Z)({ref:n,sx:(0,t.Z)((0,r.Z)((0,t.Z)({},void 0===g?{}:g),{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"}),h?{cursor:"wait !important"}:{}),type:d,form:x,disabled:void 0!==p&&p||h,onClick:h?void 0:v,variant:S},k),{children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.$j,{size:b,color:u(S),"data-testid":l(k["data-testid"],"spinner")}),c&&i]}):(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(c,{size:b,fill:j,"data-testid":l(k["data-testid"],"icon")}),i]})}))})},2978:function(e,n,i){"use strict";i.d(n,{Z:function(){return l}});var t=i(62230),r=i(85244),o=i(98240),s=i(52322);i(2784);var c=i(75289),a=function(e){var n=e.bg,i=e.background,r=e.sx,o=e.withRadius,a=e.radius,l=e.children;return(0,s.jsx)(c.xu,{sx:(0,t.Z)({p:4,bg:n||i},o?{borderBottomLeftRadius:a,borderBottomRightRadius:a}:null,r),children:l})},l=function(e){var n=e.Header,i=void 0===n?null:n,l=e.SubHeader,u=void 0===l?null:l,d=e.Body,x=void 0===d?null:d,f=e.Footer,h=void 0===f?null:f,p=e.borderFooter,v=e.radius,g=void 0===v?"6px":v,m=e.bodySx,b=e.footerSx,j=e.sx,C=e.bg,S=e.background,k=e.children,w=(0,o.Z)(e,["Header","SubHeader","Body","Footer","borderFooter","radius","bodySx","footerSx","sx","bg","background","children"]);return(0,s.jsxs)(c.Zb,(0,r.Z)((0,t.Z)({sx:(0,t.Z)({border:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.borders))},borderRadius:g},void 0===j?null:j)},w),{children:[i?(0,s.jsx)(i,{radius:g}):null,u?(0,s.jsx)(u,{radius:g}):null,(0,s.jsxs)(a,{bg:C,background:S,sx:void 0===m?{}:m,withRadius:!h,children:[x?(0,s.jsx)(x,{}):null,k||null]}),h?(0,s.jsx)(a,{bg:C,background:S,sx:(0,t.Z)({},void 0!==p&&p?{borderTop:function(e){var n=e.colors;return"1px solid ".concat(String(null==n?void 0:n.borders))}}:null,void 0===b?{}:b),radius:g,withRadius:!0,children:"object"==typeof h?h:(0,s.jsx)(h,{})}):null]}))}},94355:function(e,n,i){"use strict";i.d(n,{q:function(){return l}});var t=i(62230),r=i(52322),o=i(2784),s=i(65186),c=i(75289),a=(0,o.memo)(function(e){var n=e.src;return(0,r.jsx)(c.Ee,{src:n,alt:"Preview image",sx:{maxHeight:"100%"}})}),l=function(e){var n=e.src,i=e.sx;return(0,r.jsx)(c.kC,{sx:(0,t.Z)({position:"relative",alignItems:"center",justifyContent:"center",overflow:"hidden",backgroundImage:"url(/pattern.png)",backgroundColor:"headSection",backgroundRepeat:"repeat",backgroundSize:"20px",borderRadius:"4px"},i),children:void 0!==n?(0,r.jsx)(a,{src:n}):(0,r.jsxs)(c.xv,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(s.eJU,{}),"You have no screenshot yet."]})})}},40496:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return es}});var t,r,o,s=i(52322),c=i(97729),a=i.n(c),l=i(5632),u=i.n(l),d=i(57054),x=i(22710),f=i(62230),h=i(85244),p=i(99267),v=i(71463),g=i(22715),m=i(25242),b=i(2784),j=i(56580),C=i(88932),S=i(75289),k=i(65077),w=i(12189),y=i(16991),E=i(81541),R=function(e,n,i){var t=(0,b.useState)(e()),r=t[0],o=t[1],s=(0,b.useRef)(Date.now());return(0,b.useEffect)(function(){var i=setTimeout(function(){Date.now()-s.current>=n&&(o(e()),s.current=Date.now())},n-(Date.now()-s.current));return function(){clearTimeout(i)}},[n].concat((0,E.Z)(i))),r},Z=i(2978),D=i(94355),I=i(28199),z=i(91873),M=i(59097),O=i(7342),_=function(e){var n=e.sliceName,i=e.screenshotUrl,t=(0,j.v9)(function(e){return{isScreenshotModalOpen:(0,z.gP)(e,M.q.SCREENSHOT_PREVIEW)}}).isScreenshotModalOpen,r=(0,O.Z)().closeModals;return(0,s.jsx)(I.Z,{isOpen:t,shouldCloseOnOverlayClick:!0,contentLabel:"Screenshot Preview",portalClassName:"ScreenshotPreviewModal",onRequestClose:r,children:(0,s.jsx)(Z.Z,{radius:"0px",bodySx:{p:0,bg:"#FFF",position:"relative",height:"100%",padding:16},footerSx:{position:"sticky",bottom:0,p:0},sx:{border:"none"},Header:function(){return(0,s.jsxs)(S.kC,{sx:{position:"sticky",top:0,zIndex:1,p:"16px",alignItems:"center",justifyContent:"space-between",borderBottom:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.borders))}},children:[(0,s.jsxs)(S.X6,{sx:{fontSize:"14px"},children:["Screenshot Preview for ",n]}),(0,s.jsx)(S.x8,{type:"button",onClick:function(){return r()}})]})},Footer:function(){return(0,s.jsx)(S.kC,{style:{justifyContent:"flex-end",height:64,alignItems:"center",paddingRight:16,borderTop:"1px solid #DCDBDD"},children:(0,s.jsx)(S.zx,{variant:"secondary",sx:{fontWeight:600},onClick:function(){return r()},children:"Close"})})},children:(0,s.jsx)(D.q,{src:i,sx:{height:"320px"}})})})},T=i(37806),F=i(79536),L=i(85819),N=i(61107),A=function(e){var n=e.children,i=e.sx;return(0,s.jsx)(S.kC,{sx:(0,f.Z)({bg:"grey07",height:"90%",width:"100%",justifyContent:"center",alignItems:"center",zIndex:"1"},i),children:(0,s.jsx)(S.kC,{sx:{marginTop:"-128px",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:n})})},B=function(e){var n=e.onRetrigger;return(0,s.jsxs)(A,{children:[(0,s.jsx)(S.Ee,{src:"/iframe-not-running.png",sx:{width:"320px"}}),(0,s.jsx)(S.xv,{sx:{color:"textClear",mb:2,fontSize:"14px",lineHeight:"24px",fontWeight:"600"},children:"Slice Machine can't render your Slice"}),(0,s.jsxs)(S.xv,{sx:{color:"failedConnectText",maxWidth:"400px",textAlign:"center",fontSize:"12px",lineHeight:"22px"},children:["Ensure your website's development server is running by typing",(0,s.jsx)("br",{}),(0,s.jsx)(S.xv,{as:"code",variant:"styles.inlineCode",sx:{padding:"4px",borderRadius:"6px"},children:"npm run dev"}),"\xa0 in your terminal at the root of your website directory.",(0,s.jsx)("br",{})," If that doesn't work, see the\xa0",(0,s.jsx)(S.rU,{target:"_blank",href:"https://prismic.io/docs/slice-machine#simulate-slices",sx:{color:"link"},children:"troubleshooting instructions."})]}),(0,s.jsx)(N.z,{onClick:n,label:"Refresh",Icon:L.Fer,iconSize:20,iconFill:"#6F6E77",variant:"secondaryMedium",sx:{mt:"16px"}})]})},P=function(e){return(0,s.jsxs)("svg",(0,h.Z)((0,f.Z)({viewBox:"0 0 72 72",xmlns:"http://www.w3.org/2000/svg"},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M51.3304 19.693C50.9182 18.9787 50.2527 18.6526 50.2527 18.6526L64.7906 10.2077C65.5266 9.78011 66.4679 10.0339 66.8929 10.7745C67.3179 11.5151 67.0657 12.4622 66.3294 12.8898L52.639 20.8424C52.639 20.8424 51.7428 20.4072 51.3304 19.693Z",fill:"current"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.6775 54.7814C58.0794 48.7394 61.6433 35.3572 55.6378 24.8917C54.7801 23.397 53.7736 22.0427 52.6481 20.8367L32.9428 32.2832C32.2068 32.7108 31.2655 32.457 30.8405 31.7165C30.4155 30.9757 30.6677 30.0287 31.4039 29.6011L50.2693 18.6425C43.486 13.2668 33.8645 12.2736 25.9299 16.8827C15.5282 22.9249 11.9642 36.3071 17.9697 46.7727C18.8274 48.2671 19.8339 49.6216 20.9595 50.8276L41.1791 39.0822C41.9151 38.6546 42.8564 38.9086 43.2814 39.6492C43.7064 40.3897 43.4542 41.3368 42.7182 41.7644L23.3384 53.0217C30.1217 58.3975 39.7432 59.3906 47.6775 54.7814Z",fill:"current"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.20645 61.7656C4.78145 61.0248 5.03367 60.078 5.76978 59.6502L20.9371 50.8398C20.9371 50.8398 21.8578 51.2406 22.3053 51.7062C22.7528 52.1717 23.361 53.0078 23.361 53.0078L7.30887 62.3323C6.57274 62.7599 5.63144 62.5061 5.20645 61.7656Z",fill:"current"})]}))},W=i(75100),U=i(19909),H=function(e){var n=e.defaultValue,i=e.variations,t=e.MenuItemAction,r=e.onChange;return(0,s.jsxs)(S.xu,{sx:{py:0,flexDirection:"column",backgroundColor:"headSection",overflow:"auto",display:"flex",borderRadius:"4px",border:function(e){var n;return"1px solid ".concat(null===(n=e.colors)||void 0===n?void 0:n.borders)},boxShadow:"0 10px 10px rgba(0, 0, 0, 0.05)",maxHeight:340,minWidth:250,maxWidth:350,color:"text"},children:[(0,s.jsxs)(S.xv,{sx:{p:3,fontSize:12,color:"textClear"},children:[i.length," VARIATION",i.length>1?"S":""]}),(0,s.jsxs)(S.kC,{sx:{p:0,flexDirection:"column"},children:[i.map(function(e){return(0,s.jsx)(V,{value:e,isActive:e.id===n.id,onClick:r},e.id)}),t||null]})]})},V=function(e){var n=e.value,i=e.isActive,t=e.onClick;return(0,s.jsx)(S.xu,{sx:{px:3,py:2,color:i?"primary":"",cursor:"pointer",borderLeft:function(e){var n=e.colors;return"2px solid ".concat(i?null==n?void 0:n.primary:null==n?void 0:n.background)},borderRadius:0,bg:"background",":hover":{bg:"hoverBackground",borderLeft:function(e){var n=e.colors;return"2px solid ".concat(null==n?void 0:n.primary)}}},onClick:function(){return t(n)},children:n.name})},q=function(e){var n=e.buttonSx,i=e.defaultValue,t=e.variations,r=e.onNewVariation,o=e.onChange,c=e.sx,a=e.disabled,l=(0,b.useState)(!1),u=l[0],d=l[1],x=(0,b.useState)(i||t[0]),h=x[0],p=x[1];(0,b.useEffect)(function(){i&&p(i)},[i]);var v=function(e){d(!1),p(e),setTimeout(function(){return o(e)},210)},g=(0,s.jsx)(S.xu,{sx:{p:2},children:(0,s.jsx)(S.zx,{variant:"transparent",sx:{color:"text"},onClick:function(){d(!1),r&&r()},children:"+ Add new variation"})});return(0,s.jsx)(S.xu,{sx:c,children:(0,s.jsx)(U.Popover,{align:"start",isOpen:u,onClickOutside:function(){return d(!1)},positions:["bottom"],padding:10,content:function(){return(0,s.jsx)(H,{defaultValue:h,variations:t,onChange:v,MenuItemAction:r?g:void 0})},containerClassName:"variationSelectorContainer",children:(0,s.jsxs)(S.zx,{sx:(0,f.Z)({},n),variant:"dropDownButton",onClick:function(){return d(!u)},disabled:a,children:[h.name," ",u?(0,s.jsx)(W.bOz,{size:"16px","aria-label":"Collapse variations"}):(0,s.jsx)(W.mEq,{size:"16px","aria-label":"Expand variations"})]})})})},X=function(e,n,i){if(!n){u().push("/".concat(e.href,"/").concat(e.model.name));return}var t,r,o,s,c,a,l,d,x,f=(r=(t={lib:e.href,sliceName:e.model.name,variationId:null==n?void 0:n.id,isSimulator:i}).lib,o=t.sliceName,s=t.variationId,a=void 0===(c=t.options)?{}:c,l=t.isSimulator,d="/slices/[lib]/[sliceName]/[variation]".concat(l?"/simulator":""),x="/slices/".concat(r,"/").concat(o,"/").concat(s).concat(l?"/simulator":""),{href:d,as:x,options:a,all:[d,x,a]});u().push(f.href,f.as,f.options)},K=function(e){var n=e.slice,i=e.variation,t=e.isDisplayEditor,r=e.toggleIsDisplayEditor,o=e.onSaveMock,c=e.actionsDisabled,a=e.isSavingMock;return(0,s.jsxs)(S.kC,{sx:{p:"16px",display:"flex",bg:"grey07",gridTemplateRows:"1fr",borderBottom:"1px solid #DCDBDD",justifyContent:"space-between"},children:[(0,s.jsxs)(S.kC,{sx:{alignItems:"center"},children:[(0,s.jsx)(P,{height:"20px",width:"20px",fill:"#1A1523"}),(0,s.jsx)(S.xv,{sx:{ml:2,mr:"12px",fontSize:"14px",color:"#1A1523",fontWeight:"600",letterSpacing:"-0.15px"},children:n.model.name}),(0,s.jsx)(q,{defaultValue:i,variations:n.model.variations,onChange:function(e){return X(n,e,!0)},disabled:n.model.variations.length<=1||c})]}),(0,s.jsxs)(S.kC,{sx:{alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsx)(S.kC,{sx:{alignItems:"center",justifyContent:"space-around"},children:(0,s.jsxs)(S.kC,{sx:{alignItems:"center",mr:4},children:[(0,s.jsx)(S.__,{htmlFor:"show-mock-editor",sx:{color:"#6F6E77",lineHeight:"16px",fontSize:"12px",fontWeight:"600",letterSpacing:"0px"},children:"Editor"}),(0,s.jsx)(S.rs,{id:"show-mock-editor",checked:t,onChange:r,disabled:c})]})}),(0,s.jsx)(N.z,{"data-testid":"save-mock",onClick:o,label:"Save mock content",disabled:a||c,variant:"primary",sx:{borderRadius:"6px",color:"#F1EEFE",fontWeight:"bold",border:"1px solid #5842C3",backgroundColor:"#6E56CF",boxShadow:"0px 1px 0px rgba(0, 0, 0, 0.04)","&:hover":{"&:not([disabled])":{backgroundColor:"#5842C3"}}}})]})]})},Y=i(17064),J=i(16),$=function(e){var n,i,t,r,o,c,a,l=e.apiContent,u=e.screenDimensions,d=e.simulatorUrl,h=e.dryRun,v=e.isScreenshot,g=void 0!==v&&v,m=e.handleSimulatorConnectionResult,j=(0,Y.Z)((i=(n=(0,b.useState)())[0],t=n[1],r=(0,b.useRef)(),o=(0,b.useRef)(),a=(0,b.useCallback)((c=(0,x.Z)(function(e){var n,i,s,c;return(0,p.__generator)(this,function(a){switch(a.label){case 0:if(null===(n=r.current)||void 0===n||n.disconnect(),null===(i=o.current)||void 0===i||i.disconnect(),t(void 0),!(null!=e))return[3,4];r.current=new J.SH(e),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.current.connect()];case 2:var l;return a.sent(),t(r.current),l=(0,x.Z)(function(){var e;return(0,p.__generator)(this,function(n){switch(n.label){case 0:return t(void 0),[4,null===(e=r.current)||void 0===e?void 0:e.connect({},!0)];case 1:return n.sent(),t(r.current),[2]}})}),s=function(){return l.apply(this,arguments)},o.current=new MutationObserver(function(e){e.forEach(function(e){"src"===e.attributeName&&s().catch(function(e){throw e})})}),o.current.observe(e,{attributeFilter:["src"]}),[3,4];case 3:return c=a.sent(),console.error(c),[3,4];case 4:return[2]}})}),function(e){return c.apply(this,arguments)}),[]),[i,a]),2),C=j[0],k=j[1];(0,b.useEffect)(function(){var e;if(!d){m("failed");return}if(void 0!==C){if(!C.connected){m("failed"),console.warn("Trying to use a disconnected simulator client.");return}(e=(0,x.Z)(function(){return(0,p.__generator)(this,function(e){switch(e.label){case 0:return[4,C.setSliceZone([l])];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})().then(function(){m("successful")}).catch(function(){m("failed")})}},[C,l,d]);var w,y,E,R,Z,D,I,z,M,O=(0,b.useState)(),_=O[0],T=O[1],F=(w=function(e){var n;T({height:e.blockSize,width:e.inlineSize})},E=(0,b.useRef)(),(0,b.useCallback)(function(e){var n;null===(n=E.current)||void 0===n||n.disconnect(),null!==e&&(E.current=new ResizeObserver(function(n){var i,t=(0,Y.Z)(n,1)[0].contentRect;w({blockSize:t.height,inlineSize:t.width},e)}),E.current.observe(e))},[]));return(0,s.jsx)(S.kC,{ref:F,sx:(0,f.Z)({alignItems:"center",backgroundColor:"headSection",backgroundImage:"url(/pattern.png)",backgroundRepeat:"repeat",backgroundSize:"10px",border:g?void 0:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.darkBorder))},borderRadius:g?void 0:8,display:"flex",height:"100%",justifyContent:"center",overflow:"hidden"},void 0!==h&&h?{display:"none"}:{}),children:d?(0,s.jsx)("iframe",{ref:k,src:d,style:(0,f.Z)({border:"none",maxHeight:"".concat(u.height,"px"),maxWidth:"".concat(u.width,"px"),minHeight:"".concat(u.height,"px"),minWidth:"".concat(u.width,"px"),overflowY:"auto"},_?{transform:"scale(".concat((R=u,Z=_,D=R.height,I=R.width,z=Z.height,M=Z.width,I>M||D>z?I-M>D-z?M/I:z/D:1),")")}:{display:"none"})}):null})},Q=function(e){var n=e.defaultValue,i=e.options,t=e.onChange;return(0,s.jsx)(S.xu,{sx:{py:0,flexDirection:"column",backgroundColor:"headSection",overflow:"auto",display:"flex",borderRadius:"6px",border:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.darkBorder))},boxShadow:"0 10px 10px rgba(0, 0, 0, 0.05)",maxHeight:340,minWidth:180,maxWidth:350,color:"text"},children:(0,s.jsx)(S.kC,{sx:{p:0,flexDirection:"column"},children:i.map(function(e){return(0,s.jsx)(G,{value:e,isActive:e===n,onClick:t})})})})},G=function(e){var n=e.value,i=e.isActive,t=e.onClick;return(0,s.jsx)(S.xu,{sx:{p:2,cursor:"pointer",fontSize:"14px",borderRadius:0,bg:i?"hoverBackground":"background",":hover":{bg:"hoverBackground"}},onClick:function(){return t(n)},children:n})},ee=function(e){var n=e.buttonSx,i=e.currentValue,t=e.options,r=e.onChange,o=e.disabled,c=(0,b.useState)(!1),a=c[0],l=c[1],u=function(e){l(!1),setTimeout(function(){return r(e)},210)};return(0,s.jsx)(S.xu,{children:(0,s.jsx)(U.Popover,{align:"start",isOpen:a,onClickOutside:function(){return l(!1)},positions:["bottom"],padding:2,content:function(){return(0,s.jsx)(Q,{defaultValue:i,options:t,onChange:u})},children:(0,s.jsxs)(S.zx,{sx:n,variant:"dropDownButton",onClick:function(){return l(!a)},disabled:o,children:[i," ",a?(0,s.jsx)(W.bOz,{size:"24px"}):(0,s.jsx)(W.mEq,{size:"24px"})]})})})},en=i(67557);(o=t||(t={})).DESKTOP="Desktop",o.TABLET="Tablet",o.MOBILE="Mobile",o.CUSTOM="Custom";var ei=(r={},(0,en.Z)(r,t.DESKTOP,{width:1280,height:800}),(0,en.Z)(r,t.TABLET,{width:1080,height:810}),(0,en.Z)(r,t.MOBILE,{width:390,height:844}),r),et=function(e){var n=e.label,i=e.startValue,t=e.onChange,r=e.sx,o=e.disabled,c=["e","-","+",",","."];return(0,s.jsxs)(S.kC,{sx:(0,f.Z)({alignItems:"center"},r),children:[(0,s.jsx)(S.__,{sx:{backgroundColor:"grey07",border:"transparent",borderRight:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.darkBorder))},borderRadius:"6px 0px 0px 6px",width:26,height:30,color:"greyIcon",fontWeight:"bold",fontSize:"14px",alignItems:"center",justifyContent:"center",position:"absolute",ml:"1px"},htmlFor:"".concat(n,"-screensize-input"),children:n}),(0,s.jsx)(S.II,{type:"number",name:"".concat(n,"-screensize-input"),disabled:o,sx:{width:80,height:32,p:0,border:"1px solid #E4E2E4",borderRadius:"6px","&::-webkit-outer-spin-button,&::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},color:"greyIcon",textAlign:"center",paddingLeft:26,"&:disabled":{cursor:"not-allowed","&:hover":{border:"1px solid #E4E2E4"},"&:active":{border:"1px solid #E4E2E4",boxShadow:"none"}}},onChange:t,value:i,min:"0",onKeyDown:function(e){c.includes(e.key)&&e.preventDefault()}})]})},er=function(e){var n=e.handleScreenSizeChange,i=e.screenDimensions,r=e.actionsDisabled,o=(0,b.useState)(t.DESKTOP),c=o[0],a=o[1],l=function(e){a(e),e!==t.CUSTOM&&n(ei[e])},u=function(e){var i=Object.values(ei).findIndex(function(n){return JSON.stringify(n)===JSON.stringify(e)}),r=i<0?t.CUSTOM:Object.keys(ei)[i];a(r),n(e)};return(0,s.jsx)(S.kC,{sx:{alignItems:"center",pb:"16px",justifyContent:"space-between",variant:"small"},children:(0,s.jsxs)(S.kC,{sx:{alignItems:"center",flex:1},children:[(0,s.jsx)(ee,{options:Object.values(t),onChange:l,buttonSx:{alignSelf:"start"},currentValue:c,disabled:r}),(0,s.jsx)(et,{label:"W",startValue:i.width.toString(),onChange:function(e){u((0,h.Z)((0,f.Z)({},i),{width:Number(e.target.value)}))},disabled:r,sx:{mx:2}}),(0,s.jsx)(W.eSQ,{size:16,color:"#6F6E77"}),(0,s.jsx)(et,{label:"H",startValue:i.height.toString(),onChange:function(e){u((0,h.Z)((0,f.Z)({},i),{height:Number(e.target.value)}))},disabled:r,sx:{ml:2}})]})})},eo=function(e){var n,i,r=e.slice,o=e.variation,c=(0,O.Z)().updateSliceMockSuccess,a=(0,j.v9)(function(e){return{simulatorUrl:(0,F.x0)(e),endpoints:(0,F.gZ)(e)}}),l=a.simulatorUrl,u=a.endpoints,d=(0,b.useMemo)(function(){return{embedApiEndpoint:new URL(u.PrismicEmbed),authStrategy:"cookie",unsplashApiBaseUrl:new URL(u.PrismicUnsplash),baseUrl:new URL("builder/",u.PrismicWroom)}},[u.PrismicEmbed,u.PrismicUnsplash,u.PrismicWroom]);(0,b.useEffect)(function(){w.Xe.track({event:"slice-simulator:open"})},[]);var E=(0,b.useRef)(!1);(0,b.useEffect)(function(){E.current=!0},[]);var Z=function(e){E.current&&(E.current=!1,w.Xe.track({event:"editor:widget-used",sliceId:e}))},D=(0,b.useState)("waiting"),I=D[0],z=D[1];(0,b.useEffect)(function(){if("waiting"===I){var e=setTimeout(function(){z("failed")},2e4);return function(){return clearTimeout(e)}}},[I]);var M,L=function(e){"waiting"===I&&("failed"===e?w.Xe.track({event:"slice-simulator:is-not-running"}):et(!0),z(e))},N=function(){z("waiting")},P=(0,b.useState)(ei[t.DESKTOP]),W=P[0],U=P[1],H=(0,b.useMemo)(function(){return T.id.fromSM(r.model)},[r.model]),V=(0,b.useState)(null),q=V[0],X=V[1],Y=(0,b.useMemo)(function(){var e,n;return(null==q?void 0:q.variation)===o.id?q:(null===(e=r.mocks)||void 0===e?void 0:e.find(function(e){return e.variation===o.id}))||{__TYPE__:"SharedSliceContent",variation:n=o.id,primary:{},items:[]}},[q,o.id]),J=(0,b.useMemo)(function(){return(0,m.renderSliceMock)(H,Y).id},[]),Q=(0,b.useCallback)(function(){return function(){return(0,h.Z)((0,f.Z)({},(0,m.renderSliceMock)(H,Y)),{id:J})}},[H,Y]),G=R(Q,800,[H,Y,]),ee=(0,b.useState)(!1),en=ee[0],et=ee[1],eo=(0,b.useState)(!1),es=eo[0],ec=eo[1],ea=(M=(0,x.Z)(function(){var e,n,i,t;return(0,p.__generator)(this,function(o){switch(o.label){case 0:if(!q)return[3,5];ec(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),n={libraryID:r.from,sliceID:r.model.id,mocks:(null!==(e=r.mocks)&&void 0!==e?e:[]).filter(function(e){return e.variation!==q.variation}).concat(q)},[4,(0,w.y3)(n)];case 2:if((i=o.sent().errors).length>0)throw i;return c(n),C.Am.success("Saved"),[3,4];case 3:return t=o.sent(),console.error("Error while saving mock",t),C.Am.error("Error saving content"),[3,4];case 4:ec(!1),o.label=5;case 5:return[2]}})}),function(){return M.apply(this,arguments)});return(0,s.jsxs)(S.kC,{sx:{flexDirection:"column",height:"100vh"},children:[(0,s.jsx)(K,{slice:r,variation:o,isDisplayEditor:en,actionsDisabled:"successful"!==I,toggleIsDisplayEditor:function(){return et(!en)},onSaveMock:function(){ea()},isSavingMock:es}),(0,s.jsx)(S.xu,{sx:{flex:1,bg:"grey07",p:3,display:"flex",flexDirection:"column",height:"calc(100% - 73px - 16px)"},children:(0,s.jsxs)(S.kC,{sx:{flex:1,flexDirection:"row",position:"relative",width:"100%",height:"100%"},children:[(0,s.jsxs)(k.xR,{sx:{display:"flex",height:"100%",flexDirection:"column",flex:1,minWidth:0},children:[(0,s.jsx)(er,{handleScreenSizeChange:U,screenDimensions:W,actionsDisabled:"successful"!==I}),"failed"===I?(0,s.jsx)(B,{onRetrigger:N}):null,"successful"===I?(0,s.jsx)($,{apiContent:G,screenDimensions:W,simulatorUrl:l,handleSimulatorConnectionResult:L}):(0,s.jsx)(s.Fragment,{children:"waiting"===I?(0,s.jsxs)(A,{children:[(0,s.jsx)(S.$j,{variant:"styles.spinner"}),(0,s.jsx)($,{apiContent:G,screenDimensions:W,simulatorUrl:l,dryRun:!0,handleSimulatorConnectionResult:L})]}):null})]}),"successful"===I&&en?(0,s.jsx)(S.kC,{className:"editor",sx:{flexDirection:"column",marginLeft:"16px",maxWidth:"440px",minWidth:"440px",overflowY:"auto"},children:(0,s.jsx)(y.S,{renderError:function(){return(0,s.jsx)(g.Iq,{title:"Editor error",description:"An error occurred while rendering the editor."})},children:(0,s.jsx)(b.Suspense,{children:(0,s.jsx)(v.kS,{config:d,content:Y,onContentChange:function(e){X(e),Z(r.model.id)},sharedSlice:H},o.id)})})}):null]})}),!!(null===(n=r.screenshots[o.id])||void 0===n?void 0:n.url)&&(0,s.jsx)(_,{sliceName:r.model.name,screenshotUrl:null===(i=r.screenshots[o.id])||void 0===i?void 0:i.url})]})};function es(){var e=(0,l.useRouter)(),n=(0,d.Z)(),i=n.slice,t=n.variation;return void 0===i||void 0===t?(e.replace("/"),null):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a(),{children:(0,s.jsx)("title",{children:"Simulator: ".concat(i.model.name," - Slice Machine")})}),(0,s.jsx)(eo,{slice:i,variation:t})]})}}},function(e){e.O(0,[789,872,851,756,774,888,179],function(){return e(e.s=30755)}),_N_E=e.O()}]);