(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{31314:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/slices/[lib]/[sliceName]/[variation]",function(){return t(12102)}])},57054:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var i=t(5632),r=t(56580),o=t(15933),a=function(e,n,t){var i,r=null===(i=(0,o.Sd)(e))||void 0===i?void 0:i.find(function(e){return e.name.replace(/\//g,"--")===n});return null==r?void 0:r.components.find(function(e){return e.model.name===t})},l=function(){var e=(0,i.useRouter)(),n=(0,r.v9)(function(n){return{slice:a(n,e.query.lib,e.query.sliceName)}}).slice;if(!n)return{};var t=n.model.variations.find(function(n){return n.id===e.query.variation});return t?{slice:n,variation:t}:{}}},12102:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eD}});var i=t(52322),r=t(97729),o=t.n(r),a=t(5632),l=t(22710),s=t(62230),c=t(85244),u=t(99267),d=t(74217),f=t(2784),m=t(12189),h=t(35393),p=t(8794),v=t(7342),x=(0,f.createContext)(void 0);function y(e){var n=e.children,t=e.initialSlice,r=(0,a.useRouter)(),o=(0,f.useState)(t),y=o[0],g=o[1],j=(0,p.c)({errorMessage:"Failed to save slice. Check your browser's console for more information."}),b=j.actionQueueStatus,w=j.setNextAction,S=(0,v.Z)().saveSliceSuccess,C=(0,d.R9)(S),k=(0,h.g)().syncChanges,I=(0,f.useMemo)(function(){var e=r.query.variation,n=y.model.variations.find(function(n){return n.id===e});if(n)return n;throw Error("Variation not found")},[y,r]),T=(0,f.useCallback)(function(e){g(e),w((0,l.Z)(function(){var n,t,i,r,o;return(0,u.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,m.Ve)(e)];case 1:if((t=n.sent().errors).length>0)throw t;return[4,(0,m.pL)({libraryID:e.from,sliceID:e.model.id})];case 2:if(r=(i=n.sent()).errors,o=i.mocks,r.length>0)throw r;return C((0,c.Z)((0,s.Z)({},e),{mocks:o})),k(),[2]}})}))},[w,C,k]),R=(0,f.useMemo)(function(){return{actionQueueStatus:b,slice:y,setSlice:T,variation:I}},[b,y,T,I]);return(0,i.jsx)(x.Provider,{value:R,children:"function"==typeof n?n(R):n})}function g(){var e=(0,f.useContext)(x);if(!e)throw Error("SliceBuilderProvider not found");return e}var j=t(57054),b=t(22715),w=t(42770),S=t(90104),C=t(16991),k=t(18566),I=t(7604);function T(e){return R.apply(this,arguments)}function R(){return(R=(0,l.Z)(function(e){var n,t,i;return(0,u.__generator)(this,function(r){switch(r.label){case 0:return[4,I.j.customTypes.readCustomType({id:e})];case 1:if(t=(n=r.sent()).errors,i=n.model,t.length>0)throw t;return[2,i]}})})).apply(this,arguments)}var A=t(99526),E=t(15732),Z=t(25132),D=function(e){return(0,i.jsxs)("svg",(0,c.Z)((0,s.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:[(0,i.jsx)("path",{d:"M9.5 12L6 9.5L9.5 7V9.5V12Z",fill:"currentColor"}),(0,i.jsx)("path",{d:"M6 9.5H11C14.3 9.5 17 12.2 17 15.5V17.5M6 9.5L9.5 12V9.5V7L6 9.5Z",stroke:"currentColor",strokeLinecap:"round"})]}))},_=function(){var e,n,t=(e=(0,E.l)().source,n=(0,A.Ag)(e.query),void 0!==n&&(0,A.ne)(e.asPath,n)?n:void 0);return void 0!==t?(0,i.jsx)(C.S,{children:(0,i.jsx)(f.Suspense,{children:(0,i.jsx)(b.xu,{bottom:32,justifyContent:"center",position:"fixed",right:0,width:"100vw",children:(0,i.jsx)(N,{sourceCustomTypeId:t})})})}):null},N=function(e){var n,t=(n=e.sourceCustomTypeId,(0,k.QT)(T,[n])),r=(0,f.useState)(!0),o=r[0],l=r[1],s=(0,a.useRouter)();if(void 0===t||!o)return null;var c=t.format,u=t.id,d=A.cd[c].getBuilderPagePathname(u);return(0,i.jsxs)(b.hE,{density:"compact",color:"dark",children:[(0,i.jsxs)(b.zx,{onClick:function(){s.push(d)},renderStartIcon:function(){return(0,i.jsx)(D,{})},children:["Return to ",t.label]}),(0,i.jsx)(b.zx,{onClick:function(){l(!1)},renderStartIcon:function(){return(0,i.jsx)(Z.T,{})}})]})},L=t(64314),F=t(56580),O=t(33710),V=t(93067),z=t(16131),M=t(25978),P=t(13309),K=function(e){var n=e.children,t=e.open,r=e.onClose;return(0,i.jsxs)(V.zs,{open:t,trigger:n,onClose:r,children:[(0,i.jsx)(V.Ev,{children:"Simulate your slices"}),(0,i.jsx)(V.LB,{component:"video",cloudName:"dmtf1daqp",loop:!1,autoPlay:!1,publicId:M.Sn,poster:"/simulator-video-thumbnail.png",controls:!0,onPlay:function(){m.Xe.track({event:"open-video-tutorials",video:M.Sn})}}),(0,i.jsx)(V.OJ,{children:"Minimize context-switching by previewing your Slice components in the simulator."}),(0,i.jsx)(V.Rp,{children:"Got it"})]})},q=function(e){var n=e.disabled,t=(0,a.useRouter)(),r=(0,f.useRef)(null),o=(0,v.Z)().setSeenSimulatorToolTip,l=(0,F.v9)(function(e){return{hasSeenSimulatorTooltip:(0,P.bv)(e)}}).hasSeenSimulatorTooltip;(0,f.useEffect)(function(){var e=r.current;e&&!l&&setTimeout(function(){return O.Z.show(e)},5e3)},[l]);var s=function(){if(o(),r.current){var e=r.current;O.Z.hide(e)}};return(0,i.jsx)("span",{"data-tip":!0,"data-tip-disable":!1,"data-for":"simulator-button-tooltip",ref:r,children:(0,i.jsx)(K,{open:!l,onClose:s,children:(0,i.jsx)(b.zx,{"data-tip":!0,"data-testid":"simulator-open-button",onClick:function(){s(),window.open("".concat(t.asPath,"/simulator"),M.pq)},disabled:n,renderStartIcon:function(){return(0,i.jsx)(z.z,{color:b.rS.color.grey1,height:"24px",style:{transform:"scale(calc(4 / 3))"},width:"24px"})},children:"Simulate"})})})},B=t(88866),H=t(28316),X=t(85513),W=t(74029),G=t(1411),U=t(75843),Q=t(63987),Y=t(37806),J=t(27594),$=t(40826),ee=[$.Group,$.StructuredText,$.Image,$.Link,$.LinkToMedia,$.ContentRelationship,$.Select,$.Boolean,$.Date,$.Timestamp,$.Embed,$.Number,$.GeoPoint,$.Color,$.Text,],en=t(50535),et=t(55197),ei=t(21112),er=function(){var e=g(),n=e.slice,t=e.setSlice,r=e.variation,o=(0,f.useState)(!1),a=o[0],l=o[1],s=Boolean(r.items&&Object.keys(r.items).length>0),c=function(e){return function(i){if(e===Y.Rt.Items&&r.items&&Object.keys(r.items).length<=1){l(!0);return}var o=(0,W.AK)({slice:n,variationId:r.id,widgetArea:e,fieldId:i});t(o)}},u=function(e){return function(i){var o=i.apiId,a=i.newKey,l=i.value,s=(0,W.L4)({slice:n,variationId:r.id,widgetArea:e,previousFieldId:o,newFieldId:a,newField:l});t(s)}},d=function(e){return function(i){var o=i.id,a=i.label,l=i.widgetTypeName,s=ee.find(function(e){return e.CUSTOM_NAME===l||e.TYPE_NAME===l});if(!s)throw Error("Unsupported Field Type: ".concat(l));var c=s.create(a);try{s.schema.validateSync(c,{stripUnknown:!1})}catch(u){throw Error('Model is invalid for widget "'.concat(c.type,'".'))}var d=(0,W.xS)({slice:n,variationId:r.id,widgetArea:e,newFieldId:o,newField:c.type===B.GroupFieldType?Q.Fl.fromSM(c):c});t(d),m.Xe.track({event:"field:added",id:o,name:a,type:c.type,isInAGroup:!1,contentType:(0,ei.T)(window.location.pathname)})}},h=function(e){return function(i){if(!(0,en.uS)(i)){var o=i.source,a=i.destination;if(a){var l=(0,W.gR)({slice:n,variationId:r.id,widgetArea:e,sourceIndex:o.index,destinationIndex:a.index});(0,H.flushSync)(function(){return t(l)})}}}},p=function(){var e=(0,W.Oh)({slice:n,variationId:r.id});t(e),l(!1)};return(0,i.jsxs)(X.aV,{children:[(0,i.jsx)(U.Z,{zoneType:"slice",zoneTypeFormat:void 0,tabId:void 0,title:"Fields",dataTip:" The non-repeatable zone\n  is for fields<br/> that should appear once, like a<br/>\n  section title.\n",fields:r.primary,EditModal:G.Z,widgetsArray:ee,onDeleteItem:c(Y.Rt.Primary),onSave:u(Y.Rt.Primary),onSaveNewField:d(Y.Rt.Primary),onDragEnd:h(Y.Rt.Primary),poolOfFieldsToCheck:r.primary||[],renderHintBase:function(e){var n=e.item;return"slice.primary".concat((0,et.Ti)(n.key))},renderFieldAccessor:function(e){return"slice.primary".concat((0,et.Ti)(e))},testId:"static-zone-content",isRepeatableCustomType:void 0,emptyStateHeading:void 0,emptyStateActionTestId:"add-Static-field"}),s?(0,i.jsx)(U.Z,{zoneType:"slice",zoneTypeFormat:void 0,tabId:void 0,isRepeatable:!0,title:"Repeatable Zone",dataTip:"The repeatable zone is for a group<br/>\n  of fields that you want to be able to repeat an<br/>\n  indeterminate number of times, like FAQs",widgetsArray:J.Z,fields:r.items,EditModal:G.Z,onDeleteItem:c(Y.Rt.Items),onSave:u(Y.Rt.Items),onSaveNewField:d(Y.Rt.Items),onDragEnd:h(Y.Rt.Items),poolOfFieldsToCheck:r.items||[],renderHintBase:function(e){var n=e.item;return"item".concat((0,et.Ti)(n.key))},renderFieldAccessor:function(e){return"slice.items[i]".concat((0,et.Ti)(e))},testId:"slice-repeatable-zone",isRepeatableCustomType:void 0,emptyStateHeading:"No fields",emptyStateActionTestId:"add-Repeatable-field"}):null,(0,i.jsxs)(b.Vq,{size:"small",open:a,onOpenChange:function(e){return l(e)},children:[(0,i.jsx)(b.fK,{icon:"delete",title:"Delete field"}),(0,i.jsxs)(b.cZ,{children:[(0,i.jsx)(b.xu,{padding:24,gap:12,flexDirection:"column",children:n.model.variations.length>1?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("strong",{children:["This action will permanently remove the repeatable zone from the ",n.model.name," slice ",r.name," variation."]}),(0,i.jsx)("div",{children:"Other variations will be left untouched. To reimplement repeatable fields later, use a group field instead of the repeatable zone."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("strong",{children:["This action will permanently remove the repeatable zone from the ",n.model.name,"."]}),(0,i.jsx)("div",{children:"To reimplement repeatable fields later, use a group field instead of the repeatable zone."})]})}),(0,i.jsx)(b.kX,{ok:{text:"Delete",color:"tomato",onClick:function(){return p()}},cancel:{text:"Cancel"}})]})]})]})},eo=t(88932),ea=t(86670),el=t(88201),es=t(72484),ec=t(63815);function eu(){return(eu=(0,l.Z)(function(e){var n,t,i,r,o,a,l,d,f,h,p,v;return(0,u.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),[4,(0,m.Ve)(e.component)];case 1:if((t=n.sent().errors).length>0)throw t;return[4,(0,m.Xi)({libraryID:e.component.from,sliceID:e.component.model.id,variationID:e.variation.id})];case 2:if((r=n.sent().errors).length>0)throw r;return[4,(0,m.X$)(e.component.from,e.component.model.id)];case 3:if(a=(o=n.sent()).slice,(l=o.errors).length>0)throw l;if(!a)throw Error("Could not read variation `".concat(e.variation.name,"`"));return[4,(0,m.pL)({libraryID:e.component.from,sliceID:e.component.model.id})];case 4:return d=n.sent().mocks,f=es.Y.getBuilderPagePathname({libraryName:e.component.href,sliceName:a.name,variationId:a.variations[0].id}),[4,e.router.replace(f)];case 5:return n.sent(),h=(0,c.Z)((0,s.Z)({},e.component),{model:a,mocks:d}),e.saveSliceSuccess(h),[2,h];case 6:throw p=n.sent(),v="Could not delete variation `".concat(e.variation.name,"`"),console.error(v,p),eo.Am.error(v),p;case 7:return[2]}})})).apply(this,arguments)}var ed=function(e){var n=e.isOpen,t=e.onClose,r=e.slice,o=e.variation,s=(0,a.useRouter)(),c=(0,f.useState)(!1),d=c[0],m=c[1],h=(0,v.Z)().saveSliceSuccess,p=g().setSlice;return(0,i.jsxs)(b.Vq,{open:n,onOpenChange:function(e){return!e&&t()},size:{width:448,height:"auto"},children:[(0,i.jsx)(b.fK,{icon:"delete",title:"Delete variation"}),(0,i.jsx)(b.cZ,{children:(0,i.jsxs)(b.xu,{flexDirection:"column",children:[(0,i.jsxs)(b.xv,{color:"grey11",sx:{marginBlock:16,marginInline:16},children:["This action will remove the variation from the slice model and delete associated files. When you push your changes, the variation will disappear from your repository. This update will"," ",(0,i.jsx)(ef,{children:"not"})," affect your documents until you ",(0,i.jsx)(ef,{children:"edit"})," ","them manually."]}),(0,i.jsx)(b.kX,{ok:{text:"Delete",color:"tomato",onClick:function(){o&&(0,l.Z)(function(){var e;return(0,u.__generator)(this,function(e){switch(e.label){case 0:m(!0),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,function(e){return eu.apply(this,arguments)}({component:r,router:s,saveSliceSuccess:h,variation:o})];case 2:return p(e.sent()),[3,4];case 3:return e.sent(),[3,4];case 4:return m(!1),t(),[2]}})})()},loading:d},cancel:{text:"Cancel"},size:"medium"})]})})]})},ef=function(e){return(0,i.jsx)(b.xv,(0,c.Z)((0,s.Z)({},e),{color:"inherit",component:"span",variant:"bold"}))},em=t(63397);function eh(){return(eh=(0,l.Z)(function(e){var n,t,i,r,o,a,l,d,f,h,p;return(0,u.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),[4,(0,m.Ve)(e.component)];case 1:if((t=n.sent().errors).length>0)throw t;return[4,(0,m.eH)(e.component,(0,c.Z)((0,s.Z)({},e.variation),{name:e.variationName}))];case 2:if((r=n.sent().errors).length>0)throw r;return[4,(0,m.X$)(e.component.from,e.component.model.id)];case 3:if(a=(o=n.sent()).slice,(l=o.errors).length>0)throw l;if(!a)throw Error("Could not read variation `".concat(e.variation.name,"`"));return[4,(0,m.pL)({libraryID:e.component.from,sliceID:e.component.model.id})];case 4:return d=n.sent().mocks,f=(0,c.Z)((0,s.Z)({},e.component),{model:a,mocks:d}),e.saveSliceSuccess(f),[2,f];case 5:throw h=n.sent(),p="Could not rename variation `".concat(e.variation.name,"`"),console.error(p,h),eo.Am.error(p),h;case 6:return[2]}})})).apply(this,arguments)}var ep=t(61926),ev=t.n(ep),ex=function(e){var n,t,r=e.isOpen,o=e.onClose,a=e.slice,s=e.variation,c=(0,f.useState)(!1),d=c[0],m=c[1],h=g().setSlice,p=(0,v.Z)().saveSliceSuccess;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(b.Vq,{open:r,onOpenChange:function(e){return!e&&o()},size:{width:448,height:"auto"},children:[(0,i.jsx)(b.fK,{icon:"edit",title:"Rename variation"}),(0,i.jsx)(b.cZ,{children:(0,i.jsx)(em.J9,{validateOnMount:!0,initialValues:{variationName:null!==(n=null==s?void 0:s.name)&&void 0!==n?n:""},validate:function(e){if(0===e.variationName.length)return{variationName:"Cannot be empty"}},onSubmit:(t=(0,l.Z)(function(e){var n;return(0,u.__generator)(this,function(n){switch(n.label){case 0:if(!s)return[2];m(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,function(e){return eh.apply(this,arguments)}({component:a,saveSliceSuccess:p,variation:s,variationName:e.variationName.trim()})];case 2:return h(n.sent()),[3,4];case 3:return n.sent(),[3,4];case 4:return m(!1),o(),[2]}})}),function(e){return t.apply(this,arguments)}),children:function(e){return(0,i.jsxs)("form",{children:[(0,i.jsxs)(b.xu,{flexDirection:"column",gap:8,padding:16,children:[(0,i.jsx)(b.xv,{variant:"normal",color:"grey11",children:"This action will rename the variation in the slice model. When you push your changes, the variation will be renamed in your repository."}),(0,i.jsxs)(b.xu,{flexDirection:"column",gap:4,children:[(0,i.jsxs)("label",{className:ev().label,children:[(0,i.jsx)(b.xv,{variant:"bold",children:"Variation name*"}),"string"==typeof e.errors.variationName?(0,i.jsx)(b.xv,{variant:"small",color:"tomato10",children:e.errors.variationName}):null]}),(0,i.jsx)(b.yt,{placeholder:"Variation name",error:"string"==typeof e.errors.variationName,value:e.values.variationName,onValueChange:function(n){e.setFieldValue("variationName",n.slice(0,30))}})]})]}),(0,i.jsx)(b.kX,{ok:{text:"Rename",onClick:function(){e.submitForm()},loading:d,disabled:!e.isValid},cancel:{text:"Cancel"},size:"medium"})]})}})})]})})},ey=t(97461),eg=t(76635),ej=t(36131),eb=t(75289),ew=t(2978),eS=function(e){var n=e.children,t=e.FooterContent,r=e.HeaderContent,o=e.close,a=e.sx,l=e.headerSx,c=void 0===l?{}:l;return(0,i.jsx)(ew.Z,{borderFooter:!0,footerSx:{p:0},bodySx:{pt:2,pb:4,px:4},sx:(0,s.Z)({border:"none"},void 0===a?{}:a),Header:function(e){var n=e.radius;return(0,i.jsxs)(eb.kC,{sx:(0,s.Z)({p:3,pl:4,bg:"headSection",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:n,borderTopRightRadius:n,borderBottom:function(e){var n;return"1px solid ".concat(null===(n=e.colors)||void 0===n?void 0:n.borders)}},c),children:[r,o?(0,i.jsx)(eb.x8,{onClick:o,type:"button"}):null]})},Footer:t?(0,i.jsxs)(eb.kC,{sx:{alignItems:"space-between",bg:"headSection",p:3},children:[(0,i.jsx)(eb.xu,{sx:{ml:"auto"}}),t]}):null,children:n})},eC=t(28199),ek=function(e){var n=e.msg;return(0,i.jsx)(eb.xv,{as:"span",sx:{fontSize:12,color:"error",mt:"5px",ml:2},children:n||"Error!"})},eI=function(e){var n=e.isOpen,t=e.onClose,r=e.onSubmit,o=e.initialVariation,a=e.variations,d=function(e){var n=e.id,t=e.name,i=e.origin,r=n&&n.length?null:{id:"Required!"},o=a.find(function(e){return e.id===n})?{id:"This id already exists!"}:null,l=t&&t.length?null:{name:"Required!"},c=i.value.length&&a.find(function(e){return e.id===i.value})?null:{id:"You must select an existing variation!"},u=n&&n.length&&!/^[A-Za-z0-9]+([A-Za-z0-9]+)*$/.exec(n)&&{id:"No special characters allowed"};return(0,s.Z)({},r,o,l,c,u)},m=function(e){C((0,eg.camelCase)(e))},h=function(e){E(e),I&&m(e)},p=function(e){T(!1),m(e)},v=function(){x(),t()},x=function(){C(""),E(""),j({}),T(!0),_({value:o.id,label:o.name})},y=(0,f.useState)({}),g=y[0],j=y[1],w=(0,f.useState)(""),S=w[0],C=w[1],k=(0,f.useState)(!0),I=k[0],T=k[1],R=(0,f.useState)(""),A=R[0],E=R[1],Z=(0,f.useState)({value:o.id,label:o.name}),D=Z[0],_=Z[1],N=(0,f.useState)(!1),L=N[0],F=N[1];function O(){return V.apply(this,arguments)}function V(){return(V=(0,l.Z)(function(){var e,n;return(0,u.__generator)(this,function(t){switch(t.label){case 0:if(!Object.keys(e=d({id:S,name:A,origin:D})).length)return[3,1];return j(e),[3,3];case 1:if(!(n=a.find(function(e){return e.id===D.value})))return[3,3];return F(!0),[4,r(S,A,n)];case 2:t.sent(),F(!1),v(),t.label=3;case 3:return[2]}})})).apply(this,arguments)}return(0,f.useEffect)(function(){x()},[o,n]),(0,i.jsx)(eC.Z,{isOpen:n,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return v()},contentLabel:"Widget Form Modal",style:{content:{maxWidth:"700px"}},children:(0,i.jsx)(em.J9,{initialValues:{id:S,name:A,origin:D},onSubmit:O,children:(0,i.jsx)(em.l0,{id:"variation-add",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),O())},children:(0,i.jsx)(b.xu,{children:(0,i.jsxs)(eS,{sx:{textAlign:"left"},HeaderContent:(0,i.jsx)(eb.xv,{as:"h2",children:"Add new Variation"}),FooterContent:(0,i.jsxs)(b.xu,{gap:16,alignItems:"center",children:[(0,i.jsx)(b.zx,{onClick:v,color:"grey",children:"Cancel"}),(0,i.jsx)(b.zx,{loading:L,children:"Submit"})]}),close:v,children:[(0,i.jsxs)(b.xu,{flexDirection:"column",padding:{block:16},children:[(0,i.jsxs)(eb.__,{htmlFor:"name",sx:{mb:1},children:["Variation name*",g.name?(0,i.jsx)(ek,{msg:g.name}):""]}),(0,i.jsx)(em.gN,{autoComplete:"off",id:"name",name:"name",placeholder:"e.g. Grid - With Icon",as:eb.II,maxLength:30,value:A,onChange:function(e){return h(e.currentTarget.value)}}),(0,i.jsx)(eb.xv,{children:"It will appear here in Slice Machine, and in the page editor in Prismic"})]}),(0,i.jsxs)(b.xu,{flexDirection:"column",padding:{bottom:16},children:[(0,i.jsxs)(eb.__,{htmlFor:"id",sx:{mb:1},children:["Variation ID*",g.id?(0,i.jsx)(ek,{msg:g.id}):""]}),(0,i.jsx)(em.gN,{autoComplete:"off",id:"id",name:"id",placeholder:"e.g. GridWithIcon",as:eb.II,maxLength:30,value:S,onChange:function(e){return p(e.currentTarget.value)}}),(0,i.jsx)(eb.xv,{children:"It's generated automatically based on the variation name and will appear in the API responses."})]}),(0,i.jsxs)(b.xu,{flexDirection:"column",padding:{bottom:8},children:[(0,i.jsx)(eb.__,{htmlFor:"origin",sx:{mb:1},children:"Duplicate from"}),(0,i.jsx)(ej.ZP,{name:"origin",options:a.map(function(e){return{value:e.id,label:e.name}}),onChange:function(e){e&&_(e)},defaultValue:D,maxMenuHeight:150,theme:function(e){return(0,c.Z)((0,s.Z)({},e),{colors:(0,c.Z)((0,s.Z)({},e.colors),{text:"text",primary:"background"})})}})]})]})})})})})},eT=t(87647),eR=t.n(eT),eA=function(e){var n,t=e.horizontalScroll,r=g(),o=r.slice,s=r.variation,c=r.setSlice,d=(0,f.useState)(),h=d[0],p=d[1],x=(0,ec.H)(),y=x.modalPayload,j=y.sliceFilterFn,w=y.defaultVariationSelector,S=y.onUploadSuccess,C=(0,a.useRouter)(),k=(0,v.Z)().saveSliceSuccess,I=o.model.variations.length;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.xu,{flexDirection:"column",gap:16,children:void 0!==t&&t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ea.i,{variant:"edgeFaded",color:"grey6"}),(0,i.jsxs)(b.xu,{justifyContent:"space-between",children:[(0,i.jsxs)(b.xv,{color:"grey11",children:[I," variation",1!==I&&"s"]}),(0,i.jsx)(b.zx,{onClick:function(){p({type:"ADD_VARIATION"})},startIcon:"add",color:"grey"})]}),(0,i.jsx)("div",{className:eR().hideScrollbar,style:{height:"240px",position:"relative",marginRight:"-32px",overflowX:"scroll",scrollSnapType:"x mandatory"},children:(0,i.jsx)("div",{style:{position:"absolute",paddingRight:"32px"},children:(0,i.jsx)(b.xu,{flexDirection:"row",gap:16,children:(0,i.jsx)(eE,{screenshotChangesModal:x,setDialog:p,width:320})})})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eE,{screenshotChangesModal:x,setDialog:p}),(0,i.jsx)("div",{style:{bottom:b.rS.space[0],marginBottom:"-".concat(b.rS.space[16]),position:"sticky"},children:(0,i.jsxs)(b.xu,{backgroundColor:"grey2",flexDirection:"column",padding:{bottom:40,inline:24},children:[(0,i.jsx)(b.ph,{sx:{left:0,position:"absolute",right:0}}),(0,i.jsx)(b.zx,{color:"grey",onClick:function(){p({type:"ADD_VARIATION"})},startIcon:"add",sx:{position:"relative"},children:"Add a new variation"})]})})]})}),(0,i.jsx)(ey.Z,{slices:j([o]),defaultVariationSelector:w,onUploadSuccess:S}),(0,i.jsx)(ex,{isOpen:(null==h?void 0:h.type)==="RENAME_VARIATION",onClose:function(){p(void 0)},slice:o,variation:null==h?void 0:h.variation}),(0,i.jsx)(ed,{isOpen:(null==h?void 0:h.type)==="DELETE_VARIATION",onClose:function(){p(void 0)},slice:o,variation:null==h?void 0:h.variation}),(0,i.jsx)(eI,{initialVariation:s,isOpen:(null==h?void 0:h.type)==="ADD_VARIATION",onClose:function(){p(void 0)},onSubmit:(n=(0,l.Z)(function(e,n,t){var i,r,a,l,s,d;return(0,u.__generator)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),r=(i=(0,W.Kp)({slice:o,id:e,name:n,copiedVariation:t})).slice,a=i.variation,[4,(0,m.Ve)(r)];case 1:return u.sent(),k(r),c(r),l=es.Y.getBuilderPagePathname({libraryName:r.href,sliceName:r.model.name,variationId:a.id}),C.replace(l),[3,3];case 2:return s=u.sent(),d="Could not add variation `".concat(n,"`"),console.error(d,s),eo.Am.error(d),[3,3];case 3:return[2]}})}),function(e,t,i){return n.apply(this,arguments)}),variations:o.model.variations})]})},eE=function(e){var n=e.screenshotChangesModal,t=e.setDialog,r=e.width,o=g(),a=o.slice,l=o.variation,u=o.setSlice,d={scrollSnapAlign:"start"};return(0,i.jsx)(i.Fragment,{children:a.model.variations.map(function(e){return(0,i.jsx)("div",{style:void 0!==r?(0,c.Z)((0,s.Z)({},d),{width:r}):d,children:(0,i.jsx)(el.b,{action:{type:"menu",onRename:function(){t({type:"RENAME_VARIATION",variation:e})},onRemove:function(){t({type:"DELETE_VARIATION",variation:e})},removeDisabled:a.model.variations.length<=1},mode:"navigation",onUpdateScreenshot:function(){n.onOpenModal({sliceFilterFn:function(e){return e},defaultVariationSelector:{sliceID:a.model.id,variationID:e.id},onUploadSuccess:function(e){u(e)}})},replace:!0,selected:e.id===l.id,slice:a,variant:"outlined",variationId:e.id},e.id)})})})},eZ=function(){var e=g(),n=e.slice,t=e.actionQueueStatus,r=(0,b.ac)({max:"medium"});return(0,i.jsxs)(L.LN,{children:[(0,i.jsxs)(L.wd,{children:[(0,i.jsx)(L.Xq,{url:"/slices"}),(0,i.jsxs)(L.Cx,{children:[(0,i.jsx)(w.g,{children:"Slices"}),(0,i.jsx)(w.g,{active:!0,children:n.model.name})]}),(0,i.jsxs)(L.K2,{children:[(0,i.jsx)(S.X,{status:t}),(0,i.jsx)(q,{disabled:"done"!==t})]})]}),(0,i.jsxs)(L.RN,{children:[(0,i.jsxs)(b.xu,(0,c.Z)((0,s.Z)({display:"grid",alignItems:"flex-start",gap:16},r?{gridTemplateRows:"304px 1fr"}:{gridTemplateColumns:"320px 1fr"}),{children:[(0,i.jsx)(eA,{horizontalScroll:r}),(0,i.jsx)(er,{})]})),(0,i.jsx)(_,{})]})]})};function eD(){var e=(0,a.useRouter)(),n=(0,j.Z)(),t=n.slice,r=n.variation;return void 0===t||void 0===r?(e.replace("/"),null):(0,i.jsx)(y,{initialSlice:t,children:function(e){var n=e.slice;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o(),{children:(0,i.jsxs)("title",{children:[n.model.name," - Slice Machine"]})}),(0,i.jsx)(eZ,{})]})}})}},61926:function(e){e.exports={label:"RenameVariationModal_label__SLsVs"}},87647:function(e){e.exports={hideScrollbar:"VariationsList_hideScrollbar__kRAKE"}},76473:function(e,n,t){"use strict";t.d(n,{y1:function(){return j}});var i=t(2784);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}t(52322);var o=["shift","alt","meta","mod","ctrl"],a={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function l(e){return(a[e]||e).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function s(e,n){return void 0===n&&(n=","),e.split(n)}function c(e,n,t){void 0===n&&(n="+");var i,a=e.toLocaleLowerCase().split(n).map(function(e){return l(e)});return r({},{alt:a.includes("alt"),ctrl:a.includes("ctrl")||a.includes("control"),shift:a.includes("shift"),meta:a.includes("meta"),mod:a.includes("mod")},{keys:a.filter(function(e){return!o.includes(e)}),description:t})}"undefined"!=typeof document&&(document.addEventListener("keydown",function(e){void 0!==e.key&&f([l(e.key),l(e.code)])}),document.addEventListener("keyup",function(e){void 0!==e.key&&m([l(e.key),l(e.code)])})),"undefined"!=typeof window&&window.addEventListener("blur",function(){u.clear()});var u=new Set;function d(e){return Array.isArray(e)}function f(e){var n=Array.isArray(e)?e:[e];u.has("meta")&&u.forEach(function(e){var n;return!o.includes(e)&&u.delete(e.toLowerCase())}),n.forEach(function(e){return u.add(e.toLowerCase())})}function m(e){var n=Array.isArray(e)?e:[e];"meta"===e?u.clear():n.forEach(function(e){return u.delete(e.toLowerCase())})}function h(e,n){var t=e.target;void 0===n&&(n=!1);var i=t&&t.tagName;return d(n)?Boolean(i&&n&&n.some(function(e){return e.toLowerCase()===i.toLowerCase()})):Boolean(i&&n&&!0===n)}var p=function(e,n,t){void 0===t&&(t=!1);var i,r,o=n.alt,a=n.meta,s=n.mod,c=n.shift,f=n.ctrl,m=n.keys,h=e.key,p=e.code,v=e.ctrlKey,x=e.metaKey,y=e.shiftKey,g=e.altKey,j=l(p),b=h.toLowerCase();if(!t){if(!g===o&&"alt"!==b||!y===c&&"shift"!==b)return!1;if(s){if(!x&&!v)return!1}else if(!x===a&&"meta"!==b&&"os"!==b||!v===f&&"ctrl"!==b&&"control"!==b)return!1}return!!(m&&1===m.length&&(m.includes(b)||m.includes(j)))||(m?(void 0===r&&(r=","),(d(i=m)?i:i.split(r)).every(function(e){return u.has(e.trim().toLowerCase())})):!m)},v=(0,i.createContext)(void 0),x=(0,i.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),y=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},g="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;function j(e,n,t,r){var o,a,u=(0,i.useRef)(null),j=(0,i.useRef)(!1),b=t instanceof Array?r instanceof Array?void 0:r:t,w=d(e)?e.join(null==b?void 0:b.splitKey):e,S=t instanceof Array?t:r instanceof Array?r:void 0,C=(0,i.useCallback)(n,null!=S?S:[]),k=(0,i.useRef)(C);S?k.current=C:k.current=n;var I=(!function e(n,t){return n&&t&&"object"==typeof n&&"object"==typeof t?Object.keys(n).length===Object.keys(t).length&&Object.keys(n).reduce(function(i,r){return i&&e(n[r],t[r])},!0):n===t}((a=(0,i.useRef)(void 0)).current,b)&&(a.current=b),a.current),T=(0,i.useContext)(x).enabledScopes,R=(0,i.useContext)(v);return g(function(){if((null==I?void 0:I.enabled)!==!1&&(e=T,n=null==I?void 0:I.scopes,0===e.length&&n?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!!(!n||e.some(function(e){return n.includes(e)})||e.includes("*")))){var e,n,t=function(e,n){var t,i;if(void 0===n&&(n=!1),!(h(e,["input","textarea","select"])&&!h(e,null==I?void 0:I.enableOnFormTags)||null!=I&&null!=I.ignoreEventWhen&&I.ignoreEventWhen(e))){if(null!==u.current&&document.activeElement!==u.current&&!u.current.contains(document.activeElement)){y(e);return}(null==(t=e.target)||!t.isContentEditable||null!=I&&I.enableOnContentEditable)&&s(w,null==I?void 0:I.splitKey).forEach(function(t){var i,r,o,a,l,s,u,d=c(t,null==I?void 0:I.combinationKey);if(p(e,d,null==I?void 0:I.ignoreModifiers)||null!=(u=d.keys)&&u.includes("*")){if(n&&j.current)return;if(i=e,r=d,("function"==typeof(o=null==I?void 0:I.preventDefault)&&o(i,r)||!0===o)&&i.preventDefault(),a=e,l=d,"function"==typeof(s=null==I?void 0:I.enabled)?!s(a,l):!0!==s&&void 0!==s){y(e);return}k.current(e,d),n||(j.current=!0)}})}},i=function(e){void 0!==e.key&&(f(l(e.code)),((null==I?void 0:I.keydown)===void 0&&(null==I?void 0:I.keyup)!==!0||null!=I&&I.keydown)&&t(e))},r=function(e){void 0!==e.key&&(m(l(e.code)),j.current=!1,null!=I&&I.keyup&&t(e,!0))},o=u.current||(null==b?void 0:b.document)||document;return o.addEventListener("keyup",r),o.addEventListener("keydown",i),R&&s(w,null==I?void 0:I.splitKey).forEach(function(e){return R.addHotkey(c(e,null==I?void 0:I.combinationKey,null==I?void 0:I.description))}),function(){o.removeEventListener("keyup",r),o.removeEventListener("keydown",i),R&&s(w,null==I?void 0:I.splitKey).forEach(function(e){return R.removeHotkey(c(e,null==I?void 0:I.combinationKey,null==I?void 0:I.description))})}}},[w,I,T]),u}}},function(e){e.O(0,[898,789,917,525,461,139,183,50,543,696,816,574,152,774,888,179],function(){return e(e.s=31314)}),_N_E=e.O()}]);