(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{63815:function(e,n,r){"use strict";r.d(n,{H:function(){return s}});var i=r(2784),t=r(7342),s=function(){var e=(0,t.Z)().openScreenshotsModal,n=(0,i.useState)({sliceFilterFn:function(e){return e}}),r=n[0],s=n[1];return{modalPayload:r,onOpenModal:function(n){s(n),e()}}}},97461:function(e,n,r){"use strict";r.d(n,{Z:function(){return L}});var i,t,s=r(62230),o=r(85244),a=r(52322),l=r(2784),c=r(951),u=r(75100),d=r(56580),x=r(75289),p=r(6453),h=r.n(p),f=function(e){var n=e.children;return(0,a.jsx)("kbd",{className:h().root,children:n})},v=function(e){return(0,a.jsxs)("svg",(0,o.Z)((0,s.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_5065_192538)",children:[(0,a.jsx)("path",{d:"M9.66862 19.9993C11.1406 19.9993 12.3353 18.8047 12.3353 17.3327V14.666H9.66862C8.19662 14.666 7.00195 15.8607 7.00195 17.3327C7.00195 18.8047 8.19662 19.9993 9.66862 19.9993Z",fill:"#0ACF83"}),(0,a.jsx)("path",{d:"M7.00195 12.0007C7.00195 10.5287 8.19662 9.33398 9.66862 9.33398H12.3353V14.6673H9.66862C8.19662 14.6673 7.00195 13.4727 7.00195 12.0007Z",fill:"#A259FF"}),(0,a.jsx)("path",{d:"M7.00195 6.66667C7.00195 5.19467 8.19662 4 9.66862 4H12.3353V9.33333H9.66862C8.19662 9.33333 7.00195 8.13867 7.00195 6.66667Z",fill:"#F24E1E"}),(0,a.jsx)("path",{d:"M12.334 4H15.0007C16.4727 4 17.6673 5.19467 17.6673 6.66667C17.6673 8.13867 16.4727 9.33333 15.0007 9.33333H12.334V4Z",fill:"#FF7262"}),(0,a.jsx)("path",{d:"M17.6673 12.0007C17.6673 13.4727 16.4727 14.6673 15.0007 14.6673C13.5287 14.6673 12.334 13.4727 12.334 12.0007C12.334 10.5287 13.5287 9.33398 15.0007 9.33398C16.4727 9.33398 17.6673 10.5287 17.6673 12.0007Z",fill:"#1ABCFE"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_5065_192538",children:(0,a.jsx)("rect",{width:"10.6688",height:"16",fill:"white",transform:"translate(7 4)"})})})]}))},g=r(2978),m=r(28199),j=r(91873),b=r(59097),y=r(7342);(t=i||(i={})).Mac="Mac",t.Linux="Linux",t.Windows="Windows";var C=function(){var e=navigator.userAgent,n=i.Linux;return Object.values(i).forEach(function(r){e.includes(r)&&(n=r)}),n},F=r(22710),w=r(99267),E=r(76473),I=r(88932),S=r(67557),D=r(12189);function k(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,F.Z)(function(e){var n,r,i,t,a,l,c,u,d,x;return(0,w.__generator)(this,function(p){switch(p.label){case 0:n=e.variationId,r=e.slice,i=e.file,t=e.method,p.label=1;case 1:return p.trys.push([1,3,,4]),(a=new FormData).append("file",i),a.append("libraryName",r.from),a.append("sliceName",r.model.name),a.append("variationId",n),[4,(0,D.XQ)({libraryName:r.from,sliceId:r.model.id,variationId:n,file:i})];case 2:if(c=(l=p.sent()).errors,u=l.url,c.length>0)throw c;return D.Xe.track({event:"screenshot-taken",type:"custom",method:t}),[2,(0,o.Z)((0,s.Z)({},r),{screenshots:(0,o.Z)((0,s.Z)({},r.screenshots),(0,S.Z)({},n,{url:u}))})];case 3:return d=p.sent(),x="Screenshot not saved",console.error(x,d),I.Am.error(x),[3,4];case 4:return[2]}})})).apply(this,arguments)}var _=r(94355),M=r(25978),R=function(e){var n=e.inputFile,r=e.handleFile,i=e.children,t=e.isDragActive;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.__,{htmlFor:"input-file",variant:"buttons.white",sx:{p:2,px:0,display:"flex",justifyContent:"center",width:200,alignItems:"center",flex:1},children:i||"Select file"}),(0,a.jsx)("input",{id:"input-file",type:"file",ref:n,style:{display:"none"},accept:M.nG.map(function(e){return"image/".concat(e)}).join(","),onChange:function(e){var n;r(null===(n=e.target.files)||void 0===n?void 0:n[0],t)}})]})},H=function(){return(0,a.jsx)(x.kC,{variant:"boxes.centered",sx:{p:2,position:"absolute",height:"100%",width:"100%",background:"rgba(249, 248, 249, 0.7)",backdropFilter:"blur(5px)",zIndex:"1",pointerEvents:"none"},children:(0,a.jsxs)(x.kC,{variant:"boxes.centered",sx:{border:"1px dashed #6E56CF",height:"100%",width:"100%",borderRadius:"4px"},children:[(0,a.jsx)(A,{isActive:!0}),(0,a.jsx)(x.xv,{sx:{my:2},children:"Drop file here"}),(0,a.jsx)(x.xv,{variant:"secondary",children:"Maximum upload size file: 128Mb"})]})})},A=function(e){var n=e.isActive;return(0,a.jsx)(x.kC,{sx:{p:1,borderRadius:"50%",bg:n?"#F1EEFE":"#EDECEE",alignItems:"center",justifyContent:"center",width:"48px",height:"48px"},children:(0,a.jsx)(c.IEK,{style:{color:n?"#6E56CF":"#6F6E77",fontSize:"34px"}})})},z=function(e){var n,r,i,t,c,u,d=e.variationID,p=e.slice,h=e.imageTypes,f=void 0===h?M.nG:h,v=e.onUploadSuccess,g=p.screenshots[d],m=(0,y.Z)().saveSliceCustomScreenshotSuccess,j=(0,l.useState)(!1),b=j[0],C=j[1],S=(0,l.useState)(!1),D=S[0],Z=S[1],z=(0,l.useState)(!1),O=z[0],V=z[1];(0,E.y1)(["meta+v","ctrl+v"],function(){q()},[d,p,]);var P,B,L=(i=(r={onHandleFile:(n=(0,F.Z)(function(e,n){var r,i;return(0,w.__generator)(this,function(t){switch(t.label){case 0:return V(!0),[4,k({slice:p,file:e,method:n?"dragAndDrop":"upload",variationId:d})];case 1:return r=t.sent(),Z(!1),(i=null==r?void 0:r.screenshots[d])&&(m(d,i,r),v&&v(r)),V(!1),[2]}})}),function(e,r){return n.apply(this,arguments)})}).onHandleFile,t=(0,l.useRef)(null),c=(0,F.Z)(function(e,n){return(0,w.__generator)(this,function(r){switch(r.label){case 0:if(!e)return[3,2];return[4,i(e,n)];case 1:r.sent(),(null==t?void 0:t.current)&&(t.current.value=""),r.label=2;case 2:return[2]}})}),{handleFile:u=function(e,n){return c.apply(this,arguments)},inputFile:t,FileInputRenderer:R,fileInputProps:{inputFile:t,handleFile:u}}),N=L.FileInputRenderer,T=L.fileInputProps,U=(P=(0,F.Z)(function(e){var n,r;return(0,w.__generator)(this,function(i){switch(i.label){case 0:if(e.size>128e6)return[2,I.Am.error("File is too big. Max file size: 128Mb.")];return V(!0),[4,k({slice:p,file:e,method:"dragAndDrop",variationId:d})];case 1:return(r=null==(n=i.sent())?void 0:n.screenshots[d])&&(m(d,r,n),v&&v(n)),V(!1),[2]}})}),function(e){return P.apply(this,arguments)}),W="function"==typeof navigator.clipboard.read,q=(B=(0,F.Z)(function(){var e,n,r,i,t;return(0,w.__generator)(this,function(s){switch(s.label){case 0:if(!W)return[2];s.label=1;case 1:return s.trys.push([1,5,,6]),[4,navigator.clipboard.read()];case 2:if(!(void 0!==(e=s.sent())[0])||!(void 0!==(n=e[0].types.find(function(e){return f.map(function(e){return"image/".concat(e)}).includes(e)}))))return[3,4];return[4,e[0].getType(n)];case 3:return r=s.sent(),i=new File([r],"file"),[2,U(i)];case 4:return[3,6];case 5:return t=s.sent(),console.error("Could not paste file",t),[3,6];case 6:return[2]}})}),function(){return B.apply(this,arguments)}),G=function(e){e.preventDefault(),C(!1);var n,r=null===(n=e.dataTransfer.files)||void 0===n?void 0:n[0];if(void 0!==r)return f.some(function(e){return"image/".concat(e)===r.type})?void U(r):I.Am.error("Only files of type ".concat(f.join(", ")," are accepted."))},X=function(e){return function(n){n.preventDefault(),C(e)}},K=function(e){return function(n){n.preventDefault(),Z(e)}};return(0,a.jsxs)(x.kC,{as:"form",variant:"boxes.centered",sx:{bg:"#F9F8F9",position:"relative",borderRadius:"6px",height:"320px"},onDragEnter:X(!0),onDragLeave:X(!1),onDragOver:X(!0),onMouseEnter:K(!0),onMouseLeave:K(!1),onSubmit:function(e){return e.preventDefault()},onDrop:G,children:[O?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.$j,{}),(0,a.jsx)(x.xv,{sx:{my:2},children:"Uploading file ..."})]}):null,O||void 0===g?null:(0,a.jsx)(_.q,{src:g.url,sx:{width:"100%",height:"100%",maxHeight:"100%",backdropFilter:"blur(5px)"}}),O?null:(0,a.jsx)(x.kC,{sx:{p:2,position:"absolute",width:"100%",height:"100%",borderRadius:"6px",background:"#F9F8F9B2",justifyContent:"center",alignItems:"center",visibility:D||void 0===g?"visible":"hidden"},children:(0,a.jsx)(x.kC,{variant:"boxes.centered",sx:{border:"1px dashed #6E56CF",height:"100%",width:"100%",borderRadius:"4px"},children:(0,a.jsxs)(x.kC,{sx:{width:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,a.jsx)(A,{isActive:b}),(0,a.jsx)(x.xv,{sx:{my:2},children:W?"Paste, drop or ...":"Drop or ..."}),(0,a.jsx)(N,(0,o.Z)((0,s.Z)({},T),{isDragActive:b})),(0,a.jsx)(x.xv,{sx:{color:"greyIcon",mt:1},children:"Maximum file size: 128Mb"})]})})}),b?(0,a.jsx)(H,{}):null]})},O=function(){var e,n=[i.Windows,i.Linux].includes(C())?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{children:"ctrl"})," + ",(0,a.jsx)(f,{children:"shift"})," + ",(0,a.jsx)(f,{children:"c"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f,{children:"cmd"})," + ",(0,a.jsx)(f,{children:"shift"})," + ",(0,a.jsx)(f,{children:"c"})]});return(0,a.jsxs)(x.kC,{sx:{pl:"4px",alignItems:"center",color:"#000",borderRadius:"6px",fontSize:"12px",lineHeight:"24px",border:"1px solid #E4E2E4",boxShadow:"0px 1px 0px 0px rgba(0, 0, 0, 0.04)",width:"100%",minHeight:"40px"},children:[(0,a.jsx)(v,{}),(0,a.jsxs)("div",{children:["Use\xa0",n," to copy any frame as .png, then just paste it here"]})]})},V=function(e){var n=e.isValid;return(0,a.jsx)(x.kC,{sx:{p:2,border:"1px solid #E4E2E4",borderRadius:"6px",bg:"#FFF"},children:n?(0,a.jsx)(c.Ypm,{style:{fontSize:"16px"}}):(0,a.jsx)(u.j6O,{style:{fontSize:"16px",color:"#ED811C"}})})},P=function(e){var n=e.slice,r=e.onSelectVariation,i=e.variationSelector;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.X6,{as:"h4",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.model.name}),(0,a.jsx)(x.xu,{children:(0,a.jsx)(x.xu,{as:"ul",sx:{pl:0,my:3},children:n.model.variations.map(function(e){var t=i.sliceID,l=i.variationID,c=t===n.model.id&&l===e.id;return(0,a.jsx)(x.xu,{as:"li",sx:(0,o.Z)((0,s.Z)({listStyle:"none",my:2,p:2,cursor:"pointer",borderRadius:"4px"},c&&{bg:"#EDECEE",fontWeight:"500"}),{":hover":{bg:"#EDECEE"}}),onClick:function(){return r({sliceID:n.model.id,variationID:e.id})},children:(0,a.jsxs)(x.kC,{sx:{alignItems:"center"},children:[(0,a.jsx)(V,{isValid:!!n.screenshots[e.id]}),(0,a.jsx)(x.xv,{sx:{ml:2},children:e.name})]})},"".concat(n.model.id,"-").concat(e.id))})})})]})},B=function(e,n){return e||(n.length?{sliceID:n[0].model.id,variationID:n[0].model.variations[0].id}:void 0)},L=function(e){var n=e.slices,r=e.defaultVariationSelector,i=e.onUploadSuccess,t=(0,y.Z)().closeModals,s=(0,d.v9)(function(e){return{isOpen:(0,j.gP)(e,b.q.SCREENSHOTS)}}).isOpen,o=(0,l.useState)(B(r,n)),c=o[0],u=o[1];if((0,l.useEffect)(function(){u(B(r,n))},[null==r?void 0:r.sliceID,null==r?void 0:r.variationID,s,]),0===n.length||!c)return null;var p,h="function"==typeof navigator.clipboard.read;return(0,a.jsx)(m.Z,{isOpen:s,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return t()},children:(0,a.jsx)(g.Z,{radius:"0px",bodySx:{p:0,bg:"#FFF",position:"relative"},sx:{border:"none"},Header:function(e){var n=e.radius;return(0,a.jsxs)(x.kC,{sx:{position:"sticky",top:0,zIndex:1,background:"gray",p:"16px",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:n,borderTopRightRadius:n,borderBottom:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.borders))}},children:[(0,a.jsx)(x.X6,{sx:{fontSize:"20px"},children:"Slice screenshots"}),(0,a.jsx)(x.x8,{type:"button",onClick:function(){return t()}})]})},Footer:null,children:(0,a.jsxs)(x.xu,{sx:{display:"flex",flexWrap:"wrap",height:"100%"},children:[(0,a.jsx)(x.xu,{sx:{p:3,bg:"grey07",flexGrow:1,overflow:"auto",maxHeight:"100%",flexBasis:"sidebar"},children:n.map(function(e,n){return(0,a.jsx)(P,{slice:e,variationSelector:c,onSelectVariation:u},"".concat(e.model.id,"-").concat(n))})}),(0,a.jsxs)(x.kC,{as:"main",sx:{p:3,flexGrow:99999,flexBasis:0,flexDirection:"column",minWidth:320,gap:"8px"},children:[h?(0,a.jsx)(O,{}):void 0,(p=n.find(function(e){return e.model.id===c.sliceID}))?(0,a.jsx)(z,{variationID:c.variationID,slice:p,onUploadSuccess:i}):null]})]})})})}},94355:function(e,n,r){"use strict";r.d(n,{q:function(){return c}});var i=r(62230),t=r(52322),s=r(2784),o=r(65186),a=r(75289),l=(0,s.memo)(function(e){var n=e.src;return(0,t.jsx)(a.Ee,{src:n,alt:"Preview image",sx:{maxHeight:"100%"}})}),c=function(e){var n=e.src,r=e.sx;return(0,t.jsx)(a.kC,{sx:(0,i.Z)({position:"relative",alignItems:"center",justifyContent:"center",overflow:"hidden",backgroundImage:"url(/pattern.png)",backgroundColor:"headSection",backgroundRepeat:"repeat",backgroundSize:"20px",borderRadius:"4px"},r),children:void 0!==n?(0,t.jsx)(l,{src:n}):(0,t.jsxs)(a.xv,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,t.jsx)(o.eJU,{}),"You have no screenshot yet."]})})}},6453:function(e){e.exports={root:"Kbd_root__nBos2"}}}]);