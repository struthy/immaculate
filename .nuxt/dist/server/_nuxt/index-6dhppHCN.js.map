{"version":3,"file":"index-6dhppHCN.js","sources":["../../../../components/ArticleListItem.vue","../../../../pages/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { type Content } from '@prismicio/client'\n\nconst props = defineProps({\n  article: {\n    type: Object as PropType<Content.ArticleDocument>,\n    required: true\n  }\n})\n\nconst dateFormatter = new Intl.DateTimeFormat('en-US', {\n  month: 'short',\n  day: 'numeric',\n  year: 'numeric'\n})\nconst prismic = usePrismic()\n\nconst featuredImage = computed(() => {\n  if (props.article.data.featuredImage.url) {\n    return props.article.data.featuredImage\n  }\n\n  const imageSlice = props.article.data.slices.find(slice => slice.slice_type === 'image') as Content.ImageSlice\n  if (imageSlice && imageSlice.primary.image.url) {\n    return imageSlice.primary.image\n  }\n  return null\n})\n\nconst formattedDate = computed(() => {\n  const date = prismic.asDate(props.article.data.publishDate || props.article.first_publication_date)\n\n  return dateFormatter.format(date || undefined)\n})\n\nconst excerpt = computed(() => {\n  const text = props.article.data.slices\n    .filter(slice => slice.slice_type === 'text')\n    .map((slice) => prismic.asText((slice as Content.TextSlice).primary.text))\n    .join(' ')\n  const excerpt = text.substring(0, 300)\n  if (text.length > 300) {\n    return excerpt.substring(0, excerpt.lastIndexOf(' ')) + 'â€¦'\n  } else {\n    return excerpt\n  }\n})\n</script>\n\n<template>\n  <li\n    class=\"grid grid-cols-1 items-start gap-6 md:grid-cols-3 md:gap-8\"\n  >\n    <PrismicLink\n      :field=\"article\"\n      tab-index=\"-1\"\n    >\n      <div class=\"aspect-w-4 aspect-h-3 relative bg-gray-100\">\n        <PrismicImage\n          v-if=\"featuredImage?.url\"\n          :field=\"featuredImage\"\n          class=\"object-cover\"\n        />\n      </div>\n    </PrismicLink>\n    <div class=\"grid grid-cols-1 gap-3 md:col-span-2\">\n      <Heading as=\"h2\">\n        <PrismicLink :field=\"article\">\n          {{ $prismic.asText(article.data.title) }}\n        </PrismicLink>\n      </Heading>\n      <p class=\"font-serif italic tracking-tighter text-slate-500\">\n        {{ formattedDate }}\n      </p>\n      <p\n        v-if=\"excerpt\"\n        class=\"font-serif leading-relaxed md:text-lg md:leading-relaxed\"\n      >\n        {{ excerpt }}\n      </p>\n    </div>\n  </li>\n</template>\n\n","<script setup lang=\"ts\">\nconst prismic = usePrismic()\nconst { data: articles } = useAsyncData('$articles', () =>\n  prismic.client.getAllByType(\"article\", {\n    orderings: [\n      { field: \"my.article.publishDate\", direction: \"desc\" },\n      { field: \"document.first_publication_date\", direction: \"desc\" },\n    ],\n  })\n)\nconst settings = useSettings()\n\ndefinePageMeta({\n  withHeaderProfile: true,\n  withHeaderDivider: false,\n  withFooterSignUpForm: true\n})\n\nuseHead({\n  title: computed(() => prismic.asText(settings.value?.data.name))\n})\n</script>\n\n<template>\n  <Bounded size=\"widest\">\n    <ul class=\"grid grid-cols-1 gap-16\">\n      <ArticleListItem\n        v-for=\"article in articles\"\n        :key=\"article.id\"\n        :article=\"article\"\n      />\n    </ul>\n  </Bounded>\n</template>\n"],"names":["excerpt"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,UAAM,QAAQ;AAOd,UAAM,gBAAgB,IAAI,KAAK,eAAe,SAAS;AAAA,MACrD,OAAO;AAAA,MACP,KAAK;AAAA,MACL,MAAM;AAAA,IAAA,CACP;AACD,UAAM,UAAU;AAEV,UAAA,gBAAgB,SAAS,MAAM;AACnC,UAAI,MAAM,QAAQ,KAAK,cAAc,KAAK;AACjC,eAAA,MAAM,QAAQ,KAAK;AAAA,MAC5B;AAEM,YAAA,aAAa,MAAM,QAAQ,KAAK,OAAO,KAAK,CAAA,UAAS,MAAM,eAAe,OAAO;AACvF,UAAI,cAAc,WAAW,QAAQ,MAAM,KAAK;AAC9C,eAAO,WAAW,QAAQ;AAAA,MAC5B;AACO,aAAA;AAAA,IAAA,CACR;AAEK,UAAA,gBAAgB,SAAS,MAAM;AAC7B,YAAA,OAAO,QAAQ,OAAO,MAAM,QAAQ,KAAK,eAAe,MAAM,QAAQ,sBAAsB;AAE3F,aAAA,cAAc,OAAO,QAAQ,MAAS;AAAA,IAAA,CAC9C;AAEK,UAAA,UAAU,SAAS,MAAM;AACvB,YAAA,OAAO,MAAM,QAAQ,KAAK,OAC7B,OAAO,CAAA,UAAS,MAAM,eAAe,MAAM,EAC3C,IAAI,CAAC,UAAU,QAAQ,OAAQ,MAA4B,QAAQ,IAAI,CAAC,EACxE,KAAK,GAAG;AACX,YAAMA,WAAU,KAAK,UAAU,GAAG,GAAG;AACjC,UAAA,KAAK,SAAS,KAAK;AACrB,eAAOA,SAAQ,UAAU,GAAGA,SAAQ,YAAY,GAAG,CAAC,IAAI;AAAA,MAAA,OACnD;AACEA,eAAAA;AAAAA,MACT;AAAA,IAAA,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7CD,UAAM,UAAU;AACV,UAAA,EAAE,MAAM,SAAA,IAAa;AAAA,MAAa;AAAA,MAAa,MACnD,QAAQ,OAAO,aAAa,WAAW;AAAA,QACrC,WAAW;AAAA,UACT,EAAE,OAAO,0BAA0B,WAAW,OAAO;AAAA,UACrD,EAAE,OAAO,mCAAmC,WAAW,OAAO;AAAA,QAChE;AAAA,MAAA,CACD;AAAA,IAAA;AAEH,UAAM,WAAW;AAQT,YAAA;AAAA,MACN,OAAO,SAAS,MAAA;;AAAM,uBAAQ,QAAO,cAAS,UAAT,mBAAgB,KAAK,IAAI;AAAA,OAAC;AAAA,IAAA,CAChE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}